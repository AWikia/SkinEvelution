window.MW18auto = true;
window.MW18autoDark = false;
window.MW18darkmode = false;
window.MW18LightThreshold = 50;
window.MW18HoverThreshold = 0.25;
window.MW18ContrastNotice = false;

/* Visual Themes */
var visualThemes = ['basic', 'contrast', 'simple','classic']
var visualThemeNames = ['Basic','High Contrast','Simple','Classic'];
var contrastVisual = 1;
/* Visual Colors */
var visualColors = ['factorycolors','lunacolors','classicforced','campbellforced','forced','tangoforced','rgbcolors','retro','retro2','retro3','retro4','retro5','retro6','retro7'];
var visualColorNames = ['Factory', 'XP Luna', 'Windows Forced', 'Campbell Forced', 'Mpisto OSX Forced', 'Tango Forced','RGB Celebration','Retro','Retro II','Retro III','Retro IV','Retro V','Retro VI','Retro VII'];

(function () {
	if (getKey('theme-active') === '-1') {
		insertKey('theme-active', 'theme-A' );
	}

	document.querySelector('html').className += " " + getKey('theme-active'); // We begin with the first theme selected
	$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-themes li").removeClass('selected');
	$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-themes li[data-theme-change='" + getKey('theme-active') + "']").addClass('selected');
	ColorUpdate(true);
	UpdateMisc();
	SheShe = 'auto'; // Allowed Values ('auto', true, false) 
	if (SheShe == 'auto') {
		SheShe = ($("body.server").length != 0);
	}
	$('html').attr("she-she", SheShe);
	if ( ($("body.mpisto-2018").length) || ($("body.mpisto-2018-mobile").length)) {
		$("head").append(
		'<link rel="manifest" href="manifest.json" crossorigin="use-credentials">' +
		'<link rel="shortcut icon" href="favicon.ico">' +
		'<link rel="icon" href="favicon.ico">' +
		'<link rel="favicon" href="favicon.ico">'
		);	
	}
		$("head").append(
		'<meta name="color-scheme" content="light dark">'
		);	
		$('body').attr("cursor", "mpisto");
		CursorT('auto');
		// colortheme('system-a');
		$("head").append('<style class="social-colors"></style>');
		ManagerRows(); // For Task Manager Only
		VisualStyleCompile(); // Compiles the Contrast Options
		if (getKey('style-active') === '-1') {
			if ( ( window.matchMedia('(forced-colors: active)').matches ) ) {
				insertKey('style-active', contrastvisual );
			} else {
				insertKey('style-active', 'S' );
			}
		}
		if (getKey('color-active') === '-1') {
			insertKey('color-active', 'S' );
		}
		if (getKey('filter-active') === '-1') {
			insertKey('filter-active', 'standard' );
		}
		VisualStyle(getKey('style-active'));
		VisualColor(getKey('color-active'));
		ContrastBanner(); // Notice
		ColorFilter(getKey('filter-active'));
		SocialCompile();
		$('body').click( function(e) { e.preventDefault; CheckTheme(); } );
		
})();


function getKey(key) {
var str = window.localStorage,
    result = str.getItem('-eve-pref-'+key);
if (!result) {
   return '-1';
}
return result;
}

function insertKey(key,value) {
	window.localStorage.setItem('-eve-pref-' + key, '' + value);
}

function getRandomInt(max) {
  return Math.floor(Math.random() * Math.floor(max));
}


function SupportsColorMix() {
	return CSS.supports("color","color-mix(in srgb, #34c9eb 70%, white)") || CSS.supports("color:color-mix(in srgb, #34c9eb 70%, white)") 
}

/* Color Filter */
function ColorFilter(filt) {
	$('body').attr("colorfilter", filt);
	$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-color-filters li").removeClass('selected');
	$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-color-filters li#f-" + filt).addClass('selected');
	insertKey('filter-active', filt );
}


/* Visual Styles */
function VisualStyle(style) {
	if (style === 'S') { // Standard Style
		$('html').attr("visualtheme", "standard");
	} else {
		$('html').attr("visualtheme", visualThemes[style]);
	}
	$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-visual-styles li").removeClass('selected');
	$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-visual-styles li#style" + style).addClass('selected');
		insertKey('style-active', style );
		ThemeColorMetaTag();
}

function VisualColor(style) {
	if (style === 'S') { // Standard Style
		$('html').attr("visualcolors", "standard");
		if ($('.preview-theme-wrapper.selection-theme').length) {
			$('.preview-theme-wrapper.selection-theme').attr("visualcolors", "standard");
		}
	} else {
		$('html').attr("visualcolors", visualColors[style]);
		if ($('.preview-theme-wrapper.selection-theme').length) {
			$('.preview-theme-wrapper.selection-theme').attr("visualcolors", visualColors[style]);
		}
	}
	$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-visual-colors li").removeClass('selected');
	$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-visual-colors li#color" + style).addClass('selected');
		insertKey('color-active', style );
		ColorUpdate(true);
		ThemeColorMetaTag();
}


function VisualStyleCompile() {
// Puts new options
// In the Visual Styles Dropdown
/* Visual Styles */
	for (let i = 0; i < visualThemes.length; i++) {
		str = '<li id="style' + i + '"><a onclick="VisualStyle(' + i + ')">' + visualThemeNames[i] + '</a></li>'
		$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-visual-styles").append(str);
	}
/* Visual Colors */
	for (let i = 0; i < visualColors.length; i++) {
		str = '<li id="color' + i + '"><a onclick="VisualColor(' + i + ')">' + visualColorNames[i] + '</a></li>'
		$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-visual-colors").append(str);
	}


// In the Visual Styles Options
}

/* Changes Sitename */
function UpdateSitename() {
    var x = document.getElementById("311");
    var y = $(".cpe-input.sitename").val();
    if (y === '') {
		var y = 'Untitled';
		console.log('No Sitename is used. Untitled will be used as a fallback')
    }
    if (x.checked) {
	$(".mpisto-sticky-header-container .title a").text(y + ' Wiki');
	$(".color-header .title a").text(y + ' Wiki');
	$(".mobile-header .title a").text(y + ' Wiki');
	} else {
	$(".mpisto-sticky-header-container .title a").text(y);
	$(".color-header .title a").text(y);
	$(".mobile-header .title a").text(y);
	}
}

/* Changes Cursor Theme */
function CursorT(theme) {
	if (theme === 'auto') {
		window.MW18auto = true;
		window.MW18autoDark = false
	} 	else if (theme === 'auto-r') {
		window.MW18autoDark = true
		window.MW18auto = false
	}	else {
			$('body').attr("curtheme", theme);
			window.MW18auto = false;
			window.MW18autoDark = false;
	}
   if (window.MW18auto === true) {
		var body_bg =	getComputedStyle(document.querySelector('container')).getPropertyValue("--page-background-color");
		if (isLightColor(body_bg)) {
			$('body').attr("curtheme", "light")
		} else {
			$('body').attr("curtheme", "dark")
		}
	}


   if (window.MW18autoDark === true) {
		var body_bg =	getComputedStyle(document.querySelector('container')).getPropertyValue("--page-background-color");
		if (isLightColor(body_bg)) {
			$('body').attr("curtheme", "dark")
		} else {
			$('body').attr("curtheme", "light")
		}
	}


}

/* Used for some wiki theme modes 
	Also used for some notifications
	Called on body element only */
function CheckTheme() {
	/* Wiki theme */
	ColorUpdate(true);
	ThemeColorMetaTag();
ManagerRows();
ContrastBanner();
}


function ThemeColorMetaTag() {
	/* Top bar for Mobile Devices */
	CheckColorSuitability()
}

/* Used only on Task Manager, ignored elsewhere */
function ManagerRows() {

/* For Task Manager */
if ($("body.tskmngr").length) {
	if ( ($("cpu").length) < 4) {
		document.querySelector('aside.heatmap').style.setProperty("--heatmap-rows", $("cpu").length);
	} else if ( ($("cpu").length) < 6 ) {
		document.querySelector('aside.heatmap').style.setProperty("--heatmap-rows", 2);
	} else if ( ($("cpu").length) < 13 ) {
		document.querySelector('aside.heatmap').style.setProperty("--heatmap-rows", 3);
	} else if ( ($("cpu").length) < 30 ) {
		document.querySelector('aside.heatmap').style.setProperty("--heatmap-rows", 4);
	} else if ( ($("cpu").length) < 64 ) {
		document.querySelector('aside.heatmap').style.setProperty("--heatmap-rows", 6);
	} else if ( ($("cpu").length) < 99 ) {
		document.querySelector('aside.heatmap').style.setProperty("--heatmap-rows", 8);
	} else {
		document.querySelector('aside.heatmap').style.setProperty("--heatmap-rows", 10);
	}
}


}

function ContrastBanner() {

/* For Task Manager */
if  ($("body.mpisto-2018").length) {
	if ( ( window.matchMedia('(forced-colors: active)').matches ) && (window.MW18ContrastNotice === false)  && ($('html').attr("visualtheme") !== 'contrast'  ) ) {
		window.MW18ContrastNotice = true;
		AddFloatingBanner("You're currently using a high contrast theme on your device. You may want to use the High Contrast visual style found in the <b>Visual Styles</b> dropdown in the page header so as to have a consistent high contrast experience.",'message','contrastbanner')  
	} else {
		if ( (!($(".top-gap #contrastbanner").length)) && ($('html').attr("visualtheme") !== 'contrast'  )) {
			window.MW18ContrastNotice = false;
		}
	}
}


}



/* Changes Wiki theme style
   Supported values: auto, auto-r, light, dark, system-a, system-ar, system, system-r */
function colortheme(theme) {
    var body_bg =	getComputedStyle(document.querySelector('body')).getPropertyValue("--page-background-color");
    var old_dark = window.MW18darkmode
	if (theme === 'auto') { // Auto
		window.MW18darkmode = false;
	} 	else if (theme === 'auto-r') { // Auto-Dark
		window.MW18darkmode = true;
	} 	else if (theme === 'light') { // Light
		if (isLightColor(body_bg)) {
		window.MW18darkmode = false;
		} else {
		window.MW18darkmode = true;
		}
	} 	else if (theme === 'dark') { // Dark
		if (isLightColor(body_bg)) {
		window.MW18darkmode = true;
		} else {
		window.MW18darkmode = false;
		}
	} 	else if (theme === 'system-a') { // Auto-System
		if ( window.matchMedia('(prefers-color-scheme: dark)').matches ) {
		window.MW18darkmode = true;
		} else {
		window.MW18darkmode = false;
		}
	} 	else if (theme === 'system-ar') { // Auto-System-Dark
		if ( window.matchMedia('(prefers-color-scheme: dark)').matches ) {
		window.MW18darkmode = false;
		} else {
		window.MW18darkmode = true;
		}
	} 	else if (theme === 'system') { // System
		if (isLightColor(body_bg)) {
			if ( window.matchMedia('(prefers-color-scheme: dark)').matches ) {
			window.MW18darkmode = true;
			} else {
			window.MW18darkmode = false;
			}
		} else {
			if ( window.matchMedia('(prefers-color-scheme: dark)').matches ) {
			window.MW18darkmode = false;
			} else {
			window.MW18darkmode = true;
			}
		}
	} 	else if (theme === 'system-r') { // System-Dark
		if (isLightColor(body_bg)) {
			if ( window.matchMedia('(prefers-color-scheme: dark)').matches ) {
			window.MW18darkmode = false;
			} else {
			window.MW18darkmode = true;
			}
		} else {
			if ( window.matchMedia('(prefers-color-scheme: dark)').matches ) {
			window.MW18darkmode = true;
			} else {
			window.MW18darkmode = false;
			}
		}
	} else {
		window.MW18darkmode = false;
	}
	$('body').attr("wikitheme", theme);
	if (window.MW18darkmode) {
		$('body').attr("dark-mode", isLightColor(body_bg) );
	} else {
		$('body').attr("dark-mode", !(isLightColor(body_bg)) );
	}
	if (old_dark != window.MW18darkmode) {
		ColorUpdate(false);
	}
}

function ToggleMode() {
	var theme = $('body').attr("wikitheme");
	if (theme === 'auto') {
		colortheme('auto-r');
	} else 	if (theme === 'auto-r') {
		colortheme('auto');
	} else 	if (theme === 'system-a') {
		colortheme('system-ar');
	} else 	if (theme === 'system-ar') {
		colortheme('system-a');
	} else 	if (theme === 'light') {
		colortheme('dark');
	} else 	if (theme === 'dark') {
		colortheme('light');
	} else 	if (theme === 'system') {
		colortheme('system-r');
	} else 	if (theme === 'system-r') {
		colortheme('system');
	}







}

/* Changes body background image */
function UploadPicture1(files) {
window.URL = window.URL || window.webkitURL;
const img = document.createElement("img");
img.src = window.URL.createObjectURL(files[0]);

if (files[0].size > 1024000) {
	console.error("Image is too big. Please pick another one.");
	alert("Image is too big. Please pick another one.");
	return
}

	if ($("html.theme-A").length) {
		$("style.designer-style.theme-A").append(
		'.theme-A[visualcolors="standard"] {' +
		'--community-background-image:url("' + img.src + '")!important;' +
		'}'
		);	
	}

	if ($("html.theme-B").length) {
		$("style.designer-style.theme-B").append(
		'.theme-B[visualcolors="standard"] {' +
		'--community-background-image:url("' + img.src + '")!important;' +
		'}'
		);	
	}

	if ($("html.theme-C").length) {
		$("style.designer-style.theme-C").append(
		'.theme-C[visualcolors="standard"] {' +
		'--community-background-image:url("' + img.src + '")!important;' +
		'}'
		);	
	}

	if ($("html.theme-D").length) {
		$("style.designer-style.theme-D").append(
		'.theme-D[visualcolors="standard"] {' +
		'--community-background-image:url("' + img.src + '")!important;' +
		'}'
		);	
	}

}
/* Changes body background image with input */
function UploadPicture1B(image="") {
	if (image==="") {
		img=prompt("Set Background Image (Leave empty for imageless)", "");
	} else {
		img=image;
	}
	if ($("html.theme-A").length) {
		$("style.designer-style.theme-A").append(
		'.theme-A[visualcolors="standard"] {' +
		'--community-background-image:url("' + img + '")!important;' +
		'}'
		);	
	}

	if ($("html.theme-B").length) {
		$("style.designer-style.theme-B").append(
		'.theme-B[visualcolors="standard"] {' +
		'--community-background-image:url("' + img + '")!important;' +
		'}'
		);	
	}

	if ($("html.theme-C").length) {
		$("style.designer-style.theme-C").append(
		'.theme-C[visualcolors="standard"] {' +
		'--community-background-image:url("' + img + '")!important;' +
		'}'
		);	
	}

	if ($("html.theme-D").length) {
		$("style.designer-style.theme-D").append(
		'.theme-D[visualcolors="standard"] {' +
		'--community-background-image:url("' + img + '")!important;' +
		'}'
		);	
	}

}


/* Changes avatar image */
function UploadPicture2(files) {
window.URL = window.URL || window.webkitURL;
const img = document.createElement("img");
img.src = window.URL.createObjectURL(files[0]);


if (files[0].size > 1024000) {
	console.error("Image is too big. Please pick another one.");
	alert("Image is too big. Please pick another one.");
	return
}

$("img[alt='HM100']").attr("src", img.src);

}

/* Changes avatar image with input */
function UploadPicture2B() {
img=prompt("Set Avatar Image (Leave empty for default)", "");

if (img=='') {
	$("img[alt='HM100']").attr("src", "QoreVatar/Avatar0.png");
} else {
	$("img[alt='HM100']").attr("src", img);
}

}

/* Removes avatar image */
function RemovePicture2() {
if (confirm('Are you sure you want to reset your account\'s avatar to default? This action cannot be undone') === true) {
	SetAvatar("0");
}
}


/* Changes header background image */
function UploadPicture3(files) {
window.URL = window.URL || window.webkitURL;
const img = document.createElement("img");
img.src = window.URL.createObjectURL(files[0]);
img.width = 471;
img.height = 115;


if (files[0].size > 1024000) {
	console.error("Image is too big. Please pick another one.");
	alert("Image is too big. Please pick another one.");
	return
}

		$("style.designer-style.theme-Global").append(
		'html {' +
		'--graphic:url("' + img.src + '")!important;' +
		'}'
		);	


}

/* Changes header background image with input */
function UploadPicture3B() {
img=prompt("Set Header Graphic Image (Leave empty for imageless)", "");

		$("style.designer-style.theme-Global").append(
		'html {' +
		'--graphic:url("' + img + '")!important;' +
		'}'
		);	

}


/* Changes wiki wordmark image */
function UploadPicture4(files) {
window.URL = window.URL || window.webkitURL;
const img = document.createElement("img");
img.src = window.URL.createObjectURL(files[0]);


if (files[0].size > 1024000) {
	console.error("Image is too big. Please pick another one.");
	alert("Image is too big. Please pick another one.");
	return
}

		$("style.designer-style.theme-Global").append(
		'html {' +
		'--logo:url("' + img.src + '")!important;' +
		'}'
		);
//		$(".mpisto-header-container .wordmark img").attr("src", img.src);

}

/* Changes alt avatar image */
function UploadPicture5(files) {
window.URL = window.URL || window.webkitURL;
const img = document.createElement("img");
img.src = window.URL.createObjectURL(files[0]);


if (files[0].size > 1024000) {
	console.error("Image is too big. Please pick another one.");
	alert("Image is too big. Please pick another one.");
	return
}

$("img[alt='altavatar']").attr("src", img.src);

}

/* Changes alt avatar image with input */
function UploadPicture5B() {
img=prompt("Set Bot Avatar Image (Leave empty for default, can be the same as the ones from the main account)", "");

if (img=='') {
	$("img[alt='altavatar']").attr("src", "QoreVatar/Avatar0.png");
} else {
	$("img[alt='altavatar']").attr("src", img);
}

}

function RemovePicture5() {
if (confirm('Are you sure you want to reset your bot account\'s avatar to default? This action cannot be undone') === true) {
	SetAvatar("0",true);
}
}

/* Sets an avatar. Expected file is QoreVatar/Avatar@.png where @ is a number between 0 to 17. Set the 2nd value to true (Not required) to affect alt avatar */
function SetAvatar(avatar="", alt=false) {
if (alt) {
	$("img[alt='altavatar']").attr("src", "QoreVatar/Avatar" + avatar + ".png");
} else {
	$("img[alt='HM100']").attr("src", "QoreVatar/Avatar" + avatar + ".png");
}
}


/* These functions set random color 
** Used in Preferences only
** Possible Variations of RandomColor() 1 = Body Color | 2 = Header Color | 3 = Content Color | 4 = Content Text Color | 5 = Content Border Color | 6 = Link Color | 7 = Button Color
*/
function RandomColor1() {
// var x = chroma.random()
var Colors = ['1d1d1d','8d0017','ac0000','d34500','eb9900','ffb317','7d9b34','5ea200','417800','1d5100','003c00','44a177','008d8f','00a8a9','009bf0','0068b7','003981','091a45','180052','490090','711993','8d37af','8c005a','ab0064','ea0098','5e5e5e','be0021','f73400','ff892b','ffc12c','ffc91a','8acb00','6db000','169900','58cc7d','00d1d2','41c3ff','008ee1','00baff','0075c6','4617b4','6800b3','a13bc9','bd56e5','c02883','f900a5','ff5fdc','e2e2e2']
 var x = '#' + Colors[getRandomInt(Colors.length)]
$('input[type="range"][name="bg"].red').val(chroma(x).get('rgb.r'));
$('input[type="range"][name="bg"].green').val( chroma(x).get('rgb.g'));
$('input[type="range"][name="bg"].blue').val( chroma(x).get('rgb.b'));


UpdateValue()
}

function RandomColor2() {
// var x = chroma.random()
	var Colors = ['ffb900','ff8c00','f7630c','ca5010','da3b01','ef6950','d13438','ff4343','e74856','e81023','ea005e','c30052','c30052','bf0077','c239b3','9a0089','0078d7','0063b1','8e8cd8','6b69d6','8764b8','744da9','b146c2','881798','0099bc','2d7d9a','00b7c3','028387','00b294','018574','00cc6a','10893e','7a7574','5d5a58','68768a','515c6b','567c73','486860','498205','107c10','767676','4c4a48','69797e','4a5459','647c64','525e54','847545','7e735f']
 var x = '#' + Colors[getRandomInt(Colors.length)]
$('input[type="range"][name="header"].red').val(chroma(x).get('rgb.r') );
$('input[type="range"][name="header"].green').val( chroma(x).get('rgb.g') );
$('input[type="range"][name="header"].blue').val( chroma(x).get('rgb.b') );

UpdateValue()
}

function RandomColor3() {
// var x = chroma.random()
	var Colors = ['000000','ffffff','dcdcdc','787878','464646','0a3b76','4395d1','99d9ea','0076a3','0d686b','00a99d','00a99d','7accc8','82ca9c','74a402','c4df9b','84871c','d9d56f','fff468','fff799','ffc20e','eb6119','fbaf5d','e57300','c14000','9e6b52','8c6239','c7b299','b82832','d85171','fedfec','563f7f','a186be','d9cfe5']
 var x = '#' + Colors[getRandomInt(Colors.length)]
$('input[type="range"][name="contentbg"].red').val(chroma(x).get('rgb.r') );
$('input[type="range"][name="contentbg"].green').val( chroma(x).get('rgb.g') );
$('input[type="range"][name="contentbg"].blue').val( chroma(x).get('rgb.b') );

UpdateValue()
}

function RandomColor4() {
	$("body").attr('page-text-background-color-auto', 'false');
// var x = chroma.random()
	var Colors = ['000000','3a3a3a','bfbfbf','e6e6e6','ffffff','ff0000','00ff00','0000ff','ffff00','ff00ff','00ffff']
 var x = '#' + Colors[getRandomInt(Colors.length)]
$('input[type="range"][name="contentcolor"].red').val(chroma(x).get('rgb.r') );
$('input[type="range"][name="contentcolor"].green').val(chroma(x).get('rgb.g') );
$('input[type="range"][name="contentcolor"].blue').val(chroma(x).get('rgb.b') );

UpdateValue()
}

function RandomColor5() {
$("body").attr('page-border-background-color-auto', 'false');
// var x = chroma.random()
	  var Colors = ['808080','cccccc','6e6e6e','3c3c3c','a3a3a3','800000','008000','000080','808000','800080','008080']
 var x = '#' + Colors[getRandomInt(Colors.length)]
$('input[type="range"][name="border"].red').val(chroma(x).get('rgb.r') );
$('input[type="range"][name="border"].green').val(chroma(x).get('rgb.g') );
$('input[type="range"][name="border"].blue').val(chroma(x).get('rgb.b') );

UpdateValue()
}

function RandomColor6() {
// var x = chroma.random()
	var Colors = ['00ff00','8080ff','c0c0c0','000000','ffffff','ffff00','77ffff','00007f','600000','ff0000','952aab','ff0066','fa6d6d','00ffff','ccffff','c056a2','ff6ec7','ff7f00','8e236b','7f500d','0366cc','fbf305','ff6403','dd0907','f20884','4700a5','0000d3','02abea','1fb714','006412','562c05','90713a','404040','117dbb','8b12ae','4da60c','a74f01'] 
 var x = '#' + Colors[getRandomInt(Colors.length)]
$('input[type="range"][name="linkcolor"].red').val(chroma(x).get('rgb.r') );
$('input[type="range"][name="linkcolor"].green').val(chroma(x).get('rgb.g') );
$('input[type="range"][name="linkcolor"].blue').val(chroma(x).get('rgb.b') );


UpdateValue()
}

function RandomColor7() {
// var x = chroma.random()
	var Colors = ['ff8c00','e81123','d13438','c30052','bf0077','9a0089','881798','744da9','10893e','107c10','018574','2d7d9a','0063b1','6b69d6','8e8cd8','8764b8','038387','486860','525e54','7e735f','4c4a48','515c6b','4a5459','000000','ffffff']
 var x = '#' + Colors[getRandomInt(Colors.length)]
$('input[type="range"][name="buttoncolor"].red').val(chroma(x).get('rgb.r') );
$('input[type="range"][name="buttoncolor"].green').val(chroma(x).get('rgb.g') );
$('input[type="range"][name="buttoncolor"].blue').val(chroma(x).get('rgb.b') );


UpdateValue()
}


function RandomColor9() {
	$("body").attr('toolbar-background-color-auto', 'false');
// var x = chroma.random()
	var Colors = ['ababab','8acfff','f598d6','f3d240','add85f','78d9d9','ffaf51','ff6f6f','f359a8','47cf74','c48aff','58b1fc','9898ff','c3b5a8','ffffff','576dcd','4074ff','4099e1','40b2cc','40c5ae','40c280','9bcc3f','fce840','f98a48','e1676a','ed4c5a','ef4086','bc3b8c','7e73a5','879289'] 
 var x = '#' + Colors[getRandomInt(Colors.length)]
$('input[type="range"][name="headerf"].red').val(chroma(x).get('rgb.r'));
$('input[type="range"][name="headerf"].green').val( chroma(x).get('rgb.g'));
$('input[type="range"][name="headerf"].blue').val( chroma(x).get('rgb.b'));


UpdateValue()
}


function RandomColorCc() {
	$("body").attr('caret-color-auto', 'false');
// var x = chroma.random()
	var Colors = ['bfff00','fafa00','ffbf00','ff00bf','00bfff','00ffbf','bf00ff'] 
	var x = '#' + Colors[getRandomInt(Colors.length)]
$('input[type="range"][name="caret"].red').val(chroma(x).get('rgb.r'));
$('input[type="range"][name="caret"].green').val( chroma(x).get('rgb.g'));
$('input[type="range"][name="caret"].blue').val( chroma(x).get('rgb.b'));


UpdateValue()
}



function RandomColor() {
	RandomColor1();
	RandomColor2();
	RandomColor3();
	RandomColor4();
	RandomColor5();
	RandomColor6();
	RandomColor7();
	RandomColor8();
	RandomColor9();
	RandomColorCc();
}


/* Preset Themes 
** Themes:
**			0  = Oasis
**			1  = Sapphire
**			2  = Jade
**			3  = Babygirl
**			4  = Sky
**			5  = Carbon
**			6  = Moonlight
**			7  = Rockgarden
**			8  = Oppulence
**			9 = Bluesteel
**			10 = Obession
**			11 = Creamsicle
**			12 = Plated
**			13 = Beach
**			14 = Police
**			15 = Dragstrip
**			16 = Aliencrate
*/
function PresetTheme(theme="") {
	if (theme==="") {
	//	var theme2= $('select.preset_theme').val();
		var theme2= $('.cpe-select .preset_theme .cpe-select__value').attr("value");
	} else {
		var theme2= theme;
	}
	var body_bg=[ 		  // --community-background-color
				'ffffff', // Fandom Light
				'000000', // Fandom Dark
				'f6f6f6', // CC
				'2c343d', // Fansun
				'1f1f1f', // Dark
				'cccccc', // A Secure Light
				'333333', // A Secure Dark
				'7f8afe', // A Wikia
				'ffffff', // Gamepedia Light
				'000000', // Gamepedia Dark
				'3D3527', // Can I Use... Light
				'17140e', // Can I Use... Dark
				'ffffff', // Wikimedia Colors
				'0b284f', // Zelda Blue
				'441177', // CPE Default
				'BACDD8', // Oasis
				'000000', // Windows 10
				'017683', // FandomDesktop Light
				'000000'  // FandomDesktop Dark
				][theme2];
	var body_image=[					 // --backgrounud-image
				'Empty.png',			 // Fandom Light
				'Empty.png',			 // Fandom Dark
				'Empty.png',			 // CC
				'Empty.png',			 // Fansun
				'Empty.png',			 // Dark
				'Empty.png',			 // A Secure Light
				'Empty.png',			 // A Secure Dark
				'AWikia.png',			 // A Wikia
				'Empty.png',			 // Gamepedia Light
				'Empty.png',			 // Gamepedia Dark
				'Empty.png',			 // Can I Use... Light
				'Empty.png',			 // Can I Use... Dark
				'Empty.png',			 // Wikimedia Colors
				'Empty.png',			 // Zelda Blue
				'loadbg_dev.png',		 // CPE Default
				'Empty.png',			 // Oasis
				'Empty.png',			 // Windows 10
				'FD Light.jfif',		 // FandomDesktop Light
				'FD Dark.jfif'			 // FandomDesktop Dark
				][theme2];
	var page_bg=[		  // --page-background-color (--page-text-background-color on reversed colors)
				'f3f5f4', // Fandom Light
				'0e191a', // Fandom Dark
				'ffffff', // CC
				'39424d', // Fansun
				'111111', // Dark
				'f1f1f1', // A Secure Light
				'0e0e0e', // A Secure Dark
				'9ea4f2', // A Wikia
				'ffffff', // Gamepedia Light
				'0e191a', // Gamepedia Dark
				'f2e8d5', // Can I Use... Light
				'252017', // Can I Use... Dark
				'ffffff', // Wikimedia Colors
				'17456e', // Zelda Blue
				'f1f2f3', // CPE Default
				'FFFFFF', // Oasis
				'ffffff', // Windows 10
				'ffffff', // FandomDesktop Light
				'0e191a'  // FandomDesktop Dark
				][theme2];
	var button_bg=[		  // --accent-background-color
				'01cdd1', // Fandom Light
				'01cdd1', // Fandom Dark
				'404a57', // CC
				'00b7e0', // Fansun
				'343434', // Dark
				'0009ff', // A Secure Light
				'0009ff', // A Secure Dark
				'848888', // A Wikia
				'f5811f', // Gamepedia Light
				'f5811f', // Gamepedia Dark
				'ba2f00', // Can I Use... Light
				'654600', // Can I Use... Dark
				'3366cc', // Wikimedia Colors
				'001339', // Zelda Blue
				'dd8300', // CPE Default
				'006CB0', // Oasis
				'0066cc', // Windows 10
				'005c62', // FandomDesktop Light
				'005c62'  // FandomDesktop Dark
				][theme2];
	var header_bg=[		  // --sticky-header-background-color
				'01cdd1', // Fandom Light
				'01cdd1', // Fandom Dark
				'dee7e5', // CC
				'404a57', // Fansun
				'232323', // Dark
				'003fff', // A Secure Light
				'003fff', // A Secure Dark
				'6871e6', // A Wikia
				'f5811f', // Gamepedia Light
				'f5811f', // Gamepedia Dark
				'AD6500', // Can I Use... Light
				'654600', // Can I Use... Dark
				'2a4b8d', // Wikimedia Colors
				'1d578b', // Zelda Blue
				'b88300', // CPE Default
				'006CB0', // Oasis
				'96b4d1', // Windows 10
				'005558', // FandomDesktop Light
				'058d9d'  // FandomDesktop Dark
				][theme2];
	var link_bg=[		  // --anchor-background-color
				'088488', // Fandom Light
				'01cdd1', // Fandom Dark
				'009bbe', // CC
				'00c8e0', // Fansun
				'4a90e2', // Dark
				'0009ff', // A Secure Light
				'cdd6ff', // A Secure Dark
				'0038ff', // A Wikia
				'd9721b', // Gamepedia Light
				'f5811f', // Gamepedia Dark
				'bf6f00', // Can I Use... Light
				'D4943A', // Can I Use... Dark
				'3366cc', // Wikimedia Colors
				'f4f26b', // Zelda Blue
				'dd2300', // CPE Default
				'006CB0', // Oasis
				'0066cc', // Windows 10
				'088488', // FandomDesktop Light
				'00cdd0'  // FandomDesktop Dark
				][theme2];
	/* Change Colors */
	PickColor1(body_bg);
	UploadPicture1B(body_image);
	PickColor2(header_bg);
	PickColor3(page_bg);
	PickColor6(link_bg);
	PickColor7(button_bg);
	/* Make theme adaptive, if it isn't */
	PickColor4('auto');
	PickColor5('auto');
	PickColor9('auto');
//	colortheme($('body').attr("wikitheme"))
}

/* These functions asks about what color should the user use if no value is set and sets it to an individual component such as Body Background color (The current color is used as initial answer in case of accidental use)
** If a value is set directly in the function, it instead uses that color instead of asking the user to write a color
** Used in Preferences only
** Possible Variations of PickColor() 1 = Body Color | 2 = Header Color | 3 = Content Color | 4 = Content Text Color | 5 = Content Border Color | 6 = Link Color | 7 = Button Color | 9 = Floating Header Color | Cc = Caret Color
*/
function PickColor1(color="") {
if (color==="") {
	var x= prompt("Body Background Color", chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-color")));
} else {
	var x=color;
}

$('input[type="range"][name="bg"].red').val(chroma(x).get('rgb.r'));
$('input[type="range"][name="bg"].green').val( chroma(x).get('rgb.g'));
$('input[type="range"][name="bg"].blue').val( chroma(x).get('rgb.b'));

UpdateValue()
}

function PickColor2(color="") {
if (color==="") {
	var x= prompt("Header Background Color", chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--sticky-header-background-color")));
} else {
	var x=color;
}
$('input[type="range"][name="header"].red').val(chroma(x).get('rgb.r') );
$('input[type="range"][name="header"].green').val( chroma(x).get('rgb.g') );
$('input[type="range"][name="header"].blue').val( chroma(x).get('rgb.b') );

UpdateValue()
}

function PickColor3(color="") {
if (color==="") {
	var x= prompt("Page Background Color", chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-background-color")));
} else {
	var x=color;
}

$('input[type="range"][name="contentbg"].red').val(chroma(x).get('rgb.r') );
$('input[type="range"][name="contentbg"].green').val( chroma(x).get('rgb.g') );
$('input[type="range"][name="contentbg"].blue').val( chroma(x).get('rgb.b') );

UpdateValue()
}

function PickColor4(color="") {
if (color==="") {
	if ( $("body").attr('page-text-background-color-auto') === 'true' ) {
		var x= prompt("Page Text Color", 'auto');
	} else {
		var x= prompt("Page Text Color", chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color")));
	}
} else {
	var x=color;
}
if (x !=='auto') {
	$("body").attr('page-text-background-color-auto', 'false');
	$('input[type="range"][name="contentcolor"].red').val(chroma(x).get('rgb.r') );
	$('input[type="range"][name="contentcolor"].green').val(chroma(x).get('rgb.g') );
	$('input[type="range"][name="contentcolor"].blue').val(chroma(x).get('rgb.b') );
} else {
	$("body").attr('page-text-background-color-auto', 'true');
}
UpdateValue()
}

function PickColor5(color="") {
if (color==="") {
	if ( $("body").attr('page-border-background-color-auto') === 'true' ) {
		var x= prompt("Page Border Color", 'auto');
	} else {
		var x= prompt("Page Border Color", chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color")));
	}
} else {
	var x=color;
}
if (x !=='auto') {
	$("body").attr('page-border-background-color-auto', 'false');
	$('input[type="range"][name="border"].red').val(chroma(x).get('rgb.r') );
	$('input[type="range"][name="border"].green').val(chroma(x).get('rgb.g') );
	$('input[type="range"][name="border"].blue').val(chroma(x).get('rgb.b') );
} else {
	$("body").attr('page-border-background-color-auto', 'true');
}
UpdateValue()
}

function PickColor6(color="") {
if (color==="") {
	var x= prompt("Page Link Color", chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--anchor-background-color")));
} else {
	var x=color;
}

$('input[type="range"][name="linkcolor"].red').val(chroma(x).get('rgb.r') );
$('input[type="range"][name="linkcolor"].green').val(chroma(x).get('rgb.g') );
$('input[type="range"][name="linkcolor"].blue').val(chroma(x).get('rgb.b') );
UpdateValue()
}

function PickColor7(color="") {
if (color==="") {
	var x= prompt("Page Button Color", chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--accent-background-color")));
} else {
	var x=color;
}

$('input[type="range"][name="buttoncolor"].red').val(chroma(x).get('rgb.r') );
$('input[type="range"][name="buttoncolor"].green').val(chroma(x).get('rgb.g') );
$('input[type="range"][name="buttoncolor"].blue').val(chroma(x).get('rgb.b') );
UpdateValue()
}

function PickColor9(color="") {
if (color==="") {
	if ( $("body").attr('toolbar-background-color-auto') === 'true' ) {
		var x= prompt("Floating Header Background Color", 'auto');
	} else {
	var x= prompt("Floating Header Background Color", chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--toolbar-background-color")));
	}
} else {
	var x=color;
}
if (x !=='auto') {
	$("body").attr('toolbar-background-color-auto', 'false');
	$('input[type="range"][name="headerf"].red').val(chroma(x).get('rgb.r'));
	$('input[type="range"][name="headerf"].green').val( chroma(x).get('rgb.g'));
	$('input[type="range"][name="headerf"].blue').val( chroma(x).get('rgb.b'));
} else {
	$("body").attr('toolbar-background-color-auto', 'true');
}

UpdateValue()

}



function PickColorCc(color="") {
if (color==="") {
	if ( $("body").attr('caret-color-auto') === 'true' ) {
		var x= prompt("Insertation Caret Color", 'auto');
	} else {
	var x= prompt("Insertation Caret Color", chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--caret-color")));
	}
} else {
	var x=color;
}
if (x !=='auto') {
	$("body").attr('caret-color-auto', 'false');
	$('input[type="range"][name="caret"].red').val(chroma(x).get('rgb.r'));
	$('input[type="range"][name="caret"].green').val( chroma(x).get('rgb.g'));
	$('input[type="range"][name="caret"].blue').val( chroma(x).get('rgb.b'));
} else {
	$("body").attr('caret-color-auto', 'true');
}

UpdateValue()

}



/* Updates all Sliders values found in each theme designer color selection to the red, green and blue of each color (Each color editor menu in theme designer consists of 3 sliders) */
function UpdateSet() {
	if  (!($("html.contrast.win10").length)) {
		/* Background */
		$('input[type="range"][name="bg"].red').val(chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-color")).get('rgb.r') );
		$('input[type="range"][name="bg"].green').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-color")).get('rgb.g') );
		$('input[type="range"][name="bg"].blue').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-color")).get('rgb.b') );

		/* Header (A.K.A. Active Title Bar) */
		var header_color =	getComputedStyle(document.querySelector('body')).getPropertyValue("--sticky-header-background-color");
		$('input[type="range"][name="header"].red').val(chroma(header_color).get('rgb.r') );
		$('input[type="range"][name="header"].green').val( chroma(header_color).get('rgb.g') );
		$('input[type="range"][name="header"].blue').val( chroma(header_color).get('rgb.b') );


		/* Page Background */
		$('input[type="range"][name="contentbg"].red').val(chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-background-color")).get('rgb.r') );
		$('input[type="range"][name="contentbg"].green').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-background-color")).get('rgb.g') );
		$('input[type="range"][name="contentbg"].blue').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-background-color")).get('rgb.b') );

		if (getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color") != 'auto') {
			/* Page Text */
			$('input[type="range"][name="contentcolor"].red').val(chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color")).get('rgb.r') );
			$('input[type="range"][name="contentcolor"].green').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color")).get('rgb.g') );
			$('input[type="range"][name="contentcolor"].blue').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color")).get('rgb.b') );
}
		if (getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color") != 'auto') {
			/* Page Border */
			$('input[type="range"][name="border"].red').val(chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color")).get('rgb.r') );
			$('input[type="range"][name="border"].green').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color")).get('rgb.g') );
			$('input[type="range"][name="border"].blue').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color")).get('rgb.b') );
		}

		/* Page Link */
		var link_color =	getComputedStyle(document.querySelector('body')).getPropertyValue("--anchor-background-color");
		$('input[type="range"][name="linkcolor"].red').val(chroma(link_color).get('rgb.r') );
		$('input[type="range"][name="linkcolor"].green').val( chroma(link_color).get('rgb.g') );
		$('input[type="range"][name="linkcolor"].blue').val( chroma(link_color).get('rgb.b') );


		/* Page Button */
		$('input[type="range"][name="buttoncolor"].red').val(chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--accent-background-color")).get('rgb.r') );
		$('input[type="range"][name="buttoncolor"].green').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--accent-background-color")).get('rgb.g') );
		$('input[type="range"][name="buttoncolor"].blue').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--accent-background-color")).get('rgb.b') );
		if (getComputedStyle(document.querySelector('body')).getPropertyValue("--toolbar-background-color") != 'auto') {
			/* Floating Header (A.K.A. Inactive Title Bar) */
			$('input[type="range"][name="headerf"].red').val(chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--toolbar-background-color")).get('rgb.r') );
			$('input[type="range"][name="headerf"].green').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--toolbar-background-color")).get('rgb.g') );
			$('input[type="range"][name="headerf"].blue').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--toolbar-background-color")).get('rgb.b') );
		}
		if (getComputedStyle(document.querySelector('body')).getPropertyValue("--caret-color") != 'auto') {
			/* Insertation Caret */
			$('input[type="range"][name="caret"].red').val(chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--caret-color")).get('rgb.r') );
			$('input[type="range"][name="caret"].green').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--caret-color")).get('rgb.g') );
			$('input[type="range"][name="caret"].blue').val( chroma(getComputedStyle(document.querySelector('body')).getPropertyValue("--caret-color")).get('rgb.b') );
		}
	}
}



/* Updates all 8 required color variables for each theme to the values of the sliders */
function UpdateValue() {
	var linkcolor1final = chroma('rgb(' + $('input[type="range"][name="linkcolor"].red').val() + ',' + $('input[type="range"][name="linkcolor"].green').val() + ',' + $('input[type="range"][name="linkcolor"].blue').val() + ')') ;
	var headercolorfinal = chroma('rgb(' + $('input[type="range"][name="header"].red').val() + ',' + $('input[type="range"][name="header"].green').val() + ',' + $('input[type="range"][name="header"].blue').val() + ')') ;
	if ( $("body").attr('page-border-background-color-auto') === 'true' ) {
		var contentborderfinal = 'auto' ;
	} else {
		var contentborderfinal = chroma('rgb(' + $('input[type="range"][name="border"].red').val() + ',' + $('input[type="range"][name="border"].green').val() + ',' + $('input[type="range"][name="border"].blue').val() + ')') ;
	}

	if ( $("body").attr('page-text-background-color-auto') === 'true' ) {
		var contentcolorfinal = 'auto' ;
	} else {
		var contentcolorfinal = chroma('rgb(' + $('input[type="range"][name="contentcolor"].red').val() + ',' + $('input[type="range"][name="contentcolor"].green').val() + ',' + $('input[type="range"][name="contentcolor"].blue').val() + ')') ;
	}

	if ( $("body").attr('toolbar-background-color-auto') === 'true' ) {
		var floatingheadercolorfinal = 'auto' ;
	} else {
		var floatingheadercolorfinal = chroma('rgb(' + $('input[type="range"][name="headerf"].red').val() + ',' + $('input[type="range"][name="headerf"].green').val() + ',' + $('input[type="range"][name="headerf"].blue').val() + ')') ;
	}
	if ( $("body").attr('caret-color-auto') === 'true' ) {
		var caretcolorfinal = 'auto' ;
	} else {
		var caretcolorfinal = chroma('rgb(' + $('input[type="range"][name="caret"].red').val() + ',' + $('input[type="range"][name="caret"].green').val() + ',' + $('input[type="range"][name="caret"].blue').val() + ')') ;
	}



/* Processing */
	if ($("html.theme-A").length) {
		$("style.designer-style.theme-A").append(
		'.theme-A[visualcolors="standard"] {' +
		'--community-background-color:' + chroma('rgb(' + $('input[type="range"][name="bg"].red').val() + ',' + $('input[type="range"][name="bg"].green').val() + ',' + $('input[type="range"][name="bg"].blue').val() + ')') + '!important;' +
		'--anchor-background-color:' + linkcolor1final + '!important;' +
		'--page-background-color:' + chroma('rgb(' + $('input[type="range"][name="contentbg"].red').val() + ',' + $('input[type="range"][name="contentbg"].green').val() + ',' + $('input[type="range"][name="contentbg"].blue').val() + ')') + '!important;' +
		'--page-border-background-color:' + contentborderfinal + '!important;' +
		'--page-text-background-color:' + contentcolorfinal + '!important;' +
		'--accent-background-color:' + chroma('rgb(' + $('input[type="range"][name="buttoncolor"].red').val() + ',' + $('input[type="range"][name="buttoncolor"].green').val() + ',' + $('input[type="range"][name="buttoncolor"].blue').val() + ')') + '!important;' +
		'--sticky-header-background-color:' + headercolorfinal + '!important;' +
		'--toolbar-background-color:' + floatingheadercolorfinal + '!important;' +
		'--caret-color:' + caretcolorfinal + '!important;' +
		'}'
		);	
	}

	if ($("html.theme-B").length) {
		$("style.designer-style.theme-B").append(
		'.theme-B[visualcolors="standard"] {' +
		'--community-background-color:' + chroma('rgb(' + $('input[type="range"][name="bg"].red').val() + ',' + $('input[type="range"][name="bg"].green').val() + ',' + $('input[type="range"][name="bg"].blue').val() + ')') + '!important;' +
		'--anchor-background-color:' + linkcolor1final + '!important;' +
		'--page-background-color:' + chroma('rgb(' + $('input[type="range"][name="contentbg"].red').val() + ',' + $('input[type="range"][name="contentbg"].green').val() + ',' + $('input[type="range"][name="contentbg"].blue').val() + ')') + '!important;' +
		'--page-border-background-color:' + contentborderfinal + '!important;' +
		'--page-text-background-color:' + contentcolorfinal + '!important;' +
		'--accent-background-color:' + chroma('rgb(' + $('input[type="range"][name="buttoncolor"].red').val() + ',' + $('input[type="range"][name="buttoncolor"].green').val() + ',' + $('input[type="range"][name="buttoncolor"].blue').val() + ')') + '!important;' +
		'--sticky-header-background-color:' + headercolorfinal + '!important;' +
		'--toolbar-background-color:' + floatingheadercolorfinal + '!important;' +
		'--caret-color:' + caretcolorfinal + '!important;' +
		'}'
		);	
	}

	if ($("html.theme-C").length) {
		$("style.designer-style.theme-C").append(
		'.theme-C[visualcolors="standard"] {' +
		'--community-background-color:' + chroma('rgb(' + $('input[type="range"][name="bg"].red').val() + ',' + $('input[type="range"][name="bg"].green').val() + ',' + $('input[type="range"][name="bg"].blue').val() + ')') + '!important;' +
		'--anchor-background-color:' + linkcolor1final + '!important;' +
		'--page-background-color:' + chroma('rgb(' + $('input[type="range"][name="contentbg"].red').val() + ',' + $('input[type="range"][name="contentbg"].green').val() + ',' + $('input[type="range"][name="contentbg"].blue').val() + ')') + '!important;' +
		'--page-border-background-color:' + contentborderfinal + '!important;' +
		'--page-text-background-color:' + contentcolorfinal + '!important;' +
		'--accent-background-color:' + chroma('rgb(' + $('input[type="range"][name="buttoncolor"].red').val() + ',' + $('input[type="range"][name="buttoncolor"].green').val() + ',' + $('input[type="range"][name="buttoncolor"].blue').val() + ')') + '!important;' +
		'--sticky-header-background-color:' + headercolorfinal + '!important;' +
		'--toolbar-background-color:' + floatingheadercolorfinal + '!important;' +
		'--caret-color:' + caretcolorfinal + '!important;' +
		'}'
		);	
	}

	if ($("html.theme-D").length) {
		$("style.designer-style.theme-D").append(
		'.theme-D[visualcolors="standard"] {' +
		'--community-background-color:' + chroma('rgb(' + $('input[type="range"][name="bg"].red').val() + ',' + $('input[type="range"][name="bg"].green').val() + ',' + $('input[type="range"][name="bg"].blue').val() + ')') + '!important;' +
		'--anchor-background-color:' + linkcolor1final + '!important;' +
		'--page-background-color:' + chroma('rgb(' + $('input[type="range"][name="contentbg"].red').val() + ',' + $('input[type="range"][name="contentbg"].green').val() + ',' + $('input[type="range"][name="contentbg"].blue').val() + ')') + '!important;' +
		'--page-border-background-color:' + contentborderfinal + '!important;' +
		'--page-text-background-color:' + contentcolorfinal + '!important;' +
		'--accent-background-color:' + chroma('rgb(' + $('input[type="range"][name="buttoncolor"].red').val() + ',' + $('input[type="range"][name="buttoncolor"].green').val() + ',' + $('input[type="range"][name="buttoncolor"].blue').val() + ')') + '!important;' +
		'--sticky-header-background-color:' + headercolorfinal + '!important;' +
		'--toolbar-background-color:' + floatingheadercolorfinal + '!important;' +
		'--caret-color:' + caretcolorfinal + '!important;' +
		'}'
		);	
	}
	/**/
	UpdateSet();
	/* Color Update */
	ColorUpdate(false);
}

/* Downloads all modificative values of the current selected theme to a file */
function DownloadTheme() {
	wordfilter2 = getComputedStyle(document.querySelector('body')).getPropertyValue("--logo-filter-hover")
	if ( wordfilter2 == "" ) {
		wordfilter2 == 'initial'
	}
	result = '.theme-A[visualcolors="standard"] {\n' + // Beginning
			 '--community-background-image:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-image")  + ';\n' +
			 '--community-background-color:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-color")  + ';\n' +
			 '--community-background-mode:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-mode")  + ';\n' +
			 '--community-background-alignment:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-alignment")  + ';\n' +
			 '--community-background-size:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-size")  + ';\n' +
			 '--community-background-no-tiling:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-no-tiling")  + ';\n' +
			 '--anchor-background-color:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--anchor-background-color")  + ';\n' +
			 '--page-background-color:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--page-background-color")  + ';\n' +
			 '--page-border-background-color:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color")  + ';\n' +
			 '--page-text-background-color:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color")  + ';\n' +
			 '--accent-background-color:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--accent-background-color")  + ';\n' +
			 '--sticky-header-background-color:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--sticky-header-background-color")  + ';\n' +
			 '--toolbar-background-color:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--toolbar-background-color")  + ';\n' +
			 '--caret-color:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--caret-color")  + ';\n' +
			 '--custom-secondary-font:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--custom-secondary-font")  + ';\n' +
			 '--border-radius:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--border-radius")  + ';\n' +
			 '--logo-filter:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--logo-filter")  + ';\n' +
			 '--logo-filter-hover:' + wordfilter2  + ';\n' +
			 '--logo-filter-duration:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--logo-filter-duration")  + ';\n' +
			 '--logo-filter-delay:' + getComputedStyle(document.querySelector('body')).getPropertyValue("--logo-filter-delay")  + ';\n' +
			 '}' // Ending
	DownloadData(result,'MyTheme','css');
	alert('Once you save the file, put the stylesheet contents to MpistoAgent.css for loading to other sessions or upload it to any website.');
}

/* Resets the Theme to defaults */
function ResetTheme() {
	if (confirm('Are you sure you want to reset this theme to the pre-set ones? This action cannot be undone') === true) {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").text('/* This CSS left intentionally blank */');	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").text('/* This CSS left intentionally blank */');	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").text('/* This CSS left intentionally blank */');	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").text('/* This CSS left intentionally blank */');	
		}

		ColorUpdate(true);
		UpdateMisc();
	}
}


function ResetThemeA() {
	if (confirm('Are you sure you want to reset theme A to the pre-set ones? This action cannot be undone') === true) {
			$("style.designer-style.theme-A").text('/* This CSS left intentionally blank */');	
		if ($("html.theme-A").length) {
			ColorUpdate(true);
			UpdateMisc();
		}
	}
}


function ResetThemeB() {
	if (confirm('Are you sure you want to reset theme B to the pre-set ones? This action cannot be undone') === true) {
			$("style.designer-style.theme-B").text('/* This CSS left intentionally blank */');	
		if ($("html.theme-B").length) {
			ColorUpdate(true);
			UpdateMisc();
		}
	}
}

function ResetThemeC() {
	if (confirm('Are you sure you want to reset theme C to the pre-set ones? This action cannot be undone') === true) {
			$("style.designer-style.theme-C").text('/* This CSS left intentionally blank */');	
		if ($("html.theme-C").length) {
			ColorUpdate(true);
			UpdateMisc();
		}
	}
}

function ResetThemeD() {
	if (confirm('Are you sure you want to reset theme D to the pre-set ones? This action cannot be undone') === true) {
			$("style.designer-style.theme-D").text('/* This CSS left intentionally blank */');	
		if ($("html.theme-D").length) {
			ColorUpdate(true);
			UpdateMisc();
		}
	}
}



function ResetThemes() {
	if (confirm('Are you sure you want to reset all themes to the pre-set ones? This action cannot be undone') === true) {
			$("style.designer-style.theme-A").text('/* This CSS left intentionally blank */');	
			$("style.designer-style.theme-B").text('/* This CSS left intentionally blank */');	
			$("style.designer-style.theme-C").text('/* This CSS left intentionally blank */');	
			$("style.designer-style.theme-D").text('/* This CSS left intentionally blank */');	

		ColorUpdate(true);
		UpdateMisc();
	}
}


function UpdateMisc() {
}


/* Begin Color Parsers */
function ColorTestTwin(color,color2,intensity=1,inter='hsl') {
	return chroma.mix(color,color2,MW18HoverThreshold*intensity, inter);
}

function ColorTest(color,text=false,inv=false) {

	if (isLightColor(color)) {
		if (text === true) {
			if (inv === false) {
				return '#0e191a'; // Was #000000
			} else {
				return '#ffffff';
			}
		} else {
			return ColorTestTwin(color,'#000000');
		}
	} else {
		if (text === true) {
			if (inv === true) {
				return '#0e191a'; // Was #000000
			} else {
				return '#ffffff';
			}
		} else {
			return ColorTestTwin(color,'#ffffff');
		}
	}


}

function SuperColorTest(color) {
	if (isLightColor(color)) {
		var mix = ColorTestTwin(color,'#000000');
		return ColorTestTwin(mix,'#000000');
	} else {
		var mix = ColorTestTwin(color,'#ffffff');
		return ColorTestTwin(mix,'#ffffff');
	}
}




// Only used for link and header colors
function ColorTest2(color,text=false) {
	return Color2(ColorTest(color,text));
}


function SuperColorTest2(color) {
return Color2(SuperColorTest(color));
}


// Conversion for R,G,B syntax
function Color2(color) {
	return chroma(color).get('rgb.r') + ',' + chroma(color).get('rgb.g') + ',' + chroma(color).get('rgb.b');
}

// Conversion for Hex
function Color3(r=0,g=0,b=0) {
	return chroma('rgb(' + r + ',' + g + ',' + b + ')' ).get('hex');
}


function isLightColor(color) {
	return ((chroma.contrast('#0e191a', color)) > MW18LightThreshold*0.09);
}

function isSuperLightColor(color) {
	return ((chroma.contrast('#0e191a', color)) > window.MW18LightThreshold*0.126);
}


function isSuitableColor(color,color2) {
return ((chroma.contrast(color, color2)) > MW18LightThreshold*0.06)
}

function isSuitableColor2(color,color2) {
return ((chroma.contrast(color, color2)) > MW18LightThreshold*0.03) // For Border Color
}


/* # is added automatically so no need to be used. Only hex values please when editing this function */
function CompileRecColors() {
	let str = '';
// Body Background Color
	str = '';
//	var Colors = ['f9ebc3','ede5dd','f7e1d3','dfdbc3','fbe300','ffbf99','fdc355','cdbd89','d5a593','a37719','836d35','776b41','f14700','dd3509','a34111','7b3b09', '4f4341','454545','611d03','891100','71130f','ebfffb','ebf1f5','f5ebf5','e7f3d1','bde9fd','dfbddd','c3d167','a5b5c5','6599ff','6b93b1','978f33','53835d','7f6f9f','d335f7','337700','006baf','2b53b5','2d2b17','003715','012d59','6f017b','790145','ffffff','f1f1f1','ebebeb','000000']
	var Colors = ['1d1d1d','8d0017','ac0000','d34500','eb9900','ffb317','7d9b34','5ea200','417800','1d5100','003c00','44a177','008d8f','00a8a9','009bf0','0068b7','003981','091a45','180052','490090','711993','8d37af','8c005a','ab0064','ea0098','5e5e5e','be0021','f73400','ff892b','ffc12c','ffc91a','8acb00','6db000','169900','58cc7d','00d1d2','41c3ff','008ee1','00baff','0075c6','4617b4','6800b3','a13bc9','bd56e5','c02883','f900a5','ff5fdc','e2e2e2']
	var socialAM = Colors.length

	for (let i = 0; i < socialAM; i++) {
	  var color = Colors[i];
	  var data = '<button class="cpe-button cpe-is-square color-button" onclick="PickColor1(' + "'#" + color + "'" + ')"> <div style="border:1px solid; width:inherit; height:inherit; pointer-events:none; border-radius:50%; background-color:' + "#" +  color + ';"></div> </button>'
	  str = str + data;
	}

	$(".rec-colors-body").append(str);


// Header Color
	str = '';
//	var Colors = ['fec356','6699ff','6c93b1','a47719','846d35','786c42','f14800','337800','006cb0','dd360a','a34112','474646','7b3b0a','4f4341','0038d8','2d2c18','611e03','003816','891100','012e59','721410','6f027c','7a0146'] 
	var Colors = ['ffb900','ff8c00','f7630c','ca5010','da3b01','ef6950','d13438','ff4343','e74856','e81023','ea005e','c30052','c30052','bf0077','c239b3','9a0089','0078d7','0063b1','8e8cd8','6b69d6','8764b8','744da9','b146c2','881798','0099bc','2d7d9a','00b7c3','028387','00b294','018574','00cc6a','10893e','7a7574','5d5a58','68768a','515c6b','567c73','486860','498205','107c10','767676','4c4a48','69797e','4a5459','647c64','525e54','847545','7e735f'] 

	var socialAM = Colors.length

	for (let i = 0; i < socialAM; i++) {
	  var color = Colors[i];
	  var data = '<button class="cpe-button cpe-is-square color-button" onclick="PickColor2(' + "'#" + color + "'" + ')"> <div style="border:1px solid; width:inherit; height:inherit; pointer-events:none; border-radius:50%; background-color:' + "#" +  color + ';"></div> </button>'
	  str = str + data;
	}

	$(".rec-colors-header").append(str);

// Floating Header Color
	str = '';
//	var Colors = ['fec356','6699ff','6c93b1','a47719','846d35','786c42','f14800','337800','006cb0','dd360a','a34112','474646','7b3b0a','4f4341','0038d8','2d2c18','611e03','003816','891100','012e59','721410','6f027c','7a0146'] 
	var Colors = ['ababab','8acfff','f598d6','f3d240','add85f','78d9d9','ffaf51','ff6f6f','f359a8','47cf74','c48aff','58b1fc','9898ff','c3b5a8','ffffff','576dcd','4074ff','4099e1','40b2cc','40c5ae','40c280','9bcc3f','fce840','f98a48','e1676a','ed4c5a','ef4086','bc3b8c','7e73a5','879289'] 

	var socialAM = Colors.length

	for (let i = 0; i < socialAM; i++) {
	  var color = Colors[i];
	  var data = '<button class="cpe-button cpe-is-square color-button" onclick="PickColor9(' + "'#" + color + "'" + ')"> <div style="border:1px solid; width:inherit; height:inherit; pointer-events:none; border-radius:50%; background-color:' + "#" +  color + ';"></div> </button>'
	  str = str + data;
	}

	$(".rec-colors-toolbar-background-color").append(str);


// Page Background Color
	str = '';
//	var Colors = ['ebf2f5','e7f4d2','f5ebf5','f9ecc3','eee5de','f7e1d4','d4e6f7','dfdbc3','dfbddd','cebe8a','a5b5c6','474646','2d2c18','611e03','012e59','ffffff','f2f2f2','ebebeb','000000'] 
	var Colors = ['000000','ffffff','dcdcdc','787878','464646','0a3b76','4395d1','99d9ea','0076a3','0d686b','00a99d','00a99d','7accc8','82ca9c','74a402','c4df9b','84871c','d9d56f','fff468','fff799','ffc20e','eb6119','fbaf5d','e57300','c14000','9e6b52','8c6239','c7b299','b82832','d85171','fedfec','563f7f','a186be','d9cfe5']
	var socialAM = Colors.length

	for (let i = 0; i < socialAM; i++) {
	  var color = Colors[i];
	  var data = '<button class="cpe-button cpe-is-square color-button" onclick="PickColor3(' + "'#" + color + "'" + ')"> <div style="border:1px solid; width:inherit; height:inherit; pointer-events:none; border-radius:50%; background-color:' + "#" +  color + ';"></div> </button>'
	  str = str + data;
	}

	$(".rec-colors-cnbg").append(str);

// Page Background Text Color
	str = '';
//    var Colors = ['ffffff','8e8e8e','000000','e2e2e2','cccccc','2e2e2e','f2f5f5','bed1cf','0e191a','e6ecf2','c5ced9','39424d']
	var Colors = ['000000','3a3a3a','bfbfbf','e6e6e6','ffffff','ff0000','00ff00','0000ff','ffff00','ff00ff','00ffff']
	var socialAM = Colors.length

	for (let i = 0; i < socialAM; i++) {
	  var color = Colors[i];
	  var data = '<button class="cpe-button cpe-is-square color-button" onclick="PickColor4(' + "'#" + color + "'" + ')"> <div style="border:1px solid; width:inherit; height:inherit; pointer-events:none; border-radius:50%; background-color:' + "#" +  color + ';"></div> </button>'
	  str = str + data;
	}

	$(".rec-colors-cntxt").append(str);

// Page Background Border Color
	str = '';
//    var Colors = ['ffffff','8e8e8e','000000','e2e2e2','cccccc','2e2e2e','f2f5f5','bed1cf','0e191a','e6ecf2','c5ced9','39424d']
	  var Colors = ['808080','cccccc','6e6e6e','3c3c3c','a3a3a3','800000','008000','000080','808000','800080','008080']
	var socialAM = Colors.length

	for (let i = 0; i < socialAM; i++) {
	  var color = Colors[i];
	  var data = '<button class="cpe-button cpe-is-square color-button" onclick="PickColor5(' + "'#" + color + "'" + ')"> <div style="border:1px solid; width:inherit; height:inherit; pointer-events:none; border-radius:50%; background-color:' + "#" +  color + ';"></div> </button>'
	  str = str + data;
	}

	$(".rec-colors-cnbrd").append(str);



// Link Color
	str = '';
//	var Colors = ['fce300','fec356','c4d167','6699ff','6c93b1','a47719','54845e','337800','006cb0','0148c2','6f027c','ffffff'] 
	var Colors = ['00ff00','8080ff','c0c0c0','000000','ffffff','ffff00','77ffff','00007f','600000','ff0000','952aab','ff0066','fa6d6d','00ffff','ccffff','c056a2','ff6ec7','ff7f00','8e236b','7f500d','0366cc','fbf305','ff6403','dd0907','f20884','4700a5','0000d3','02abea','1fb714','006412','562c05','90713a','404040','117dbb','8b12ae','4da60c','a74f01'] 
	var socialAM = Colors.length

	for (let i = 0; i < socialAM; i++) {
	  var color = Colors[i];
	  var data = '<button class="cpe-button cpe-is-square color-button" onclick="PickColor6(' + "'#" + color + "'" + ')"> <div style="border:1px solid; width:inherit; height:inherit; pointer-events:none; border-radius:50%; background-color:' + "#" +  color + ';"></div> </button>'
	  str = str + data;
	}

	$(".rec-colors-link").append(str);


// Button Color
	str = '';
//	var Colors = ['fec356','6699ff','6c93b1','a47719','846d35','786c42','f14800','337800','006cb0','dd360a','a34112','474646','7b3b0a','4f4341','0038d8','2d2c18','611e03','003816','891100','012e59','721410','6f027c','7a0146'] 
	var Colors = ['ff8c00','e81123','d13438','c30052','bf0077','9a0089','881798','744da9','10893e','107c10','018574','2d7d9a','0063b1','6b69d6','8e8cd8','8764b8','038387','486860','525e54','7e735f','4c4a48','515c6b','4a5459','000000','ffffff']
	var socialAM = Colors.length

	for (let i = 0; i < socialAM; i++) {
	  var color = Colors[i];
	  var data = '<button class="cpe-button cpe-is-square color-button" onclick="PickColor7(' + "'#" + color + "'" + ')"> <div style="border:1px solid; width:inherit; height:inherit; pointer-events:none; border-radius:50%; background-color:' + "#" +  color + ';"></div> </button>'
	  str = str + data;
	}

	$(".rec-colors-button").append(str);


// Caret Color
	str = '';
	var Colors = ['bfff00','fafa00','ffbf00','ff00bf','00bfff','00ffbf','bf00ff']
	var socialAM = Colors.length

	for (let i = 0; i < socialAM; i++) {
	  var color = Colors[i];
	  var data = '<button class="cpe-button cpe-is-square color-button" onclick="PickColorCc(' + "'#" + color + "'" + ')"> <div style="border:1px solid; width:inherit; height:inherit; pointer-events:none; border-radius:50%; background-color:' + "#" +  color + ';"></div> </button>'
	  str = str + data;
	}

	$(".rec-colors-caret").append(str);


}

function CompileChosenThems() {
// Selection Themes
	var highlightedItems = document.querySelectorAll(".preview-theme-wrapper.selection-theme, .preview-theme-wrapper.visual-theme");
	highlightedItems.forEach(function(x) {
	var text_color2 =	getComputedStyle(x).getPropertyValue("--window-color");
	var text_color =	getComputedStyle(x).getPropertyValue("--page-text-background-color"); // --window_text for non selection
	var header_color =	getComputedStyle(x).getPropertyValue("--header-color");
	x.style.setProperty("--bg-border", getComputedStyle(document.querySelector('container')).getPropertyValue("--page-border-background-color") );
	x.style.setProperty("--header-color-hover", ColorTest(header_color));
	x.style.setProperty("--header-text", ColorTest(header_color,true));
	if (text_color == "auto") {
		x.style.setProperty("--window-text", ColorTest(text_color2,true));
	} else {
		x.style.removeProperty("--window-text");
	}
	});

// Other Themes
	var highlightedItems = document.querySelectorAll(".preview-theme-wrapper:not(.custom-theme):not(.selection-theme)");
	highlightedItems.forEach(function(x) {
	var text_color2 =	getComputedStyle(x).getPropertyValue("--window-color");
	var text_color =	getComputedStyle(x).getPropertyValue("--window_text");
	var header_color =	getComputedStyle(x).getPropertyValue("--header-color");
	x.style.setProperty("--bg-border", getComputedStyle(document.querySelector('container')).getPropertyValue("--page-border-background-color") );
	x.style.setProperty("--header-color-hover", ColorTest(header_color));
	x.style.setProperty("--header-text", ColorTest(header_color,true));
	if (text_color === 'auto') {
		x.style.setProperty("--window-text", ColorTest(text_color2,true));
	}
	});
}

function SocialCompile() {
	$("head .social-colors").text('');	
	let str = '';
	var socialV = ['facebook','googleplus','line','linkedin','instagram','meneame','nk','odnoklassniki','reddit','tumblr','twitter','vkontakte','wykop','weibo','youtube','discord','fandom','asecure','steam','spotify','twitch','qore','mpisto','splashhol','gamepedia','info','success','warning','alert','github','xbox']
	var socialC = ['#3b5998','#dd4b39','#00c300','#0077b5','#e02d69','#ff6400','#4077a7','#f96900','#ff4500','#34465d','#1da1f2','#587ca3','#fb803f','#ff8140','#cd201f','#5865f2','#00acac','#0009FF','#000','#1ed760','#563194','#ff4500','#18bbc5','#61448d','#f4801f','#575859','#14866d','#ffcc33','#dd3333','#191717','#5dc21e']
	var socialAM = socialC.length
// Start Content BG
		if ( (window.MW18darkmode === true) ) {
		// Adaptive
			var content_color =	getComputedStyle(document.querySelector('container')).getPropertyValue("--page-background-color");
		//End Adaptive
		} else {
			var content_color =	getComputedStyle(document.querySelector('body')).getPropertyValue("--page-background-color");
		}
// End Content BG

	for (let i = 0; i < socialAM; i++) {
	  var color = socialC[i];
	  var colormixl = ColorTestTwin(content_color,color,0.8,'rgb');
      var colormix = ColorTestTwin(content_color,color,1.6,'rgb');
	  var name = socialV[i];
	  var data = '.cpe-button.cpe-is-' + name + '-color{' +'--accent-background-color:' + color + '!important;' + '--accent-background-color-hover:' + ColorTest(color,false) + '!important;' + '--accent-background-color-active:' + SuperColorTest(color,false) + '!important;' + '--accent-foreground-color:' + ColorTest(color,true) + '!important;' + '--accent-foreground-color-hover:' + ColorTest(ColorTest(color,true),false) + '!important;' + '--accent-background-color-page-background-color-mix-light:' + colormixl + '!important;' + '--accent-background-color-page-background-color-mix:' + colormix + '!important;' + '}'
	  str = str + data;
	}

	$("head .social-colors").append(str);

}

/* End Color Parsers */


/* Used to udpate all dynamical variables */
function ColorUpdate(refresh) {
/** Page BG **/
/* Set Vars */
// content_text is Content Color
// content_text4 is Text color of Content Color
// content_text5 is Dark text color of Content Color
// content_color is Content Bg
// dropdowncolor is Dropdown Bg
// dropdowncolor3 is Automatic Content Color
// dropdowncolor2 is Content Border
if ( (window.MW18darkmode === true) ) {
	var content_text =	getComputedStyle(document.querySelector('body')).getPropertyValue("--page-background-color");
// Adaptive
	if (getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color") === 'auto') {
		var content_color = ColorTest(content_text,true);
	} else {
		var content_color =	getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color");
	}
//End Adaptive
} else {
	var content_color =	getComputedStyle(document.querySelector('body')).getPropertyValue("--page-background-color");
	var content_text =	getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color");
}

var content_color2 = ColorTest(content_color);
var content_color3 = SuperColorTest(content_color); // Scrollbar


if ((getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color") === 'auto') && !($("html.contrast.win10").length)  ) {
	var dropdowncolor3 = ColorTest(content_color,true);;	
} else {
	var dropdowncolor3 = 'inherit';
}
if (isSuperLightColor(content_color) && (false)) {
	var dropdowncolor = '#ffffff';
	if ((getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color") === 'auto') && !($("html.contrast.win10").length)  ) {
		var dropdowncolor2 = chroma.mix(content_color,'#0e191a',MW18HoverThreshold*1.32, 'hsv');
	} else {
		var dropdowncolor2 = 'inherit';
	}

	
} else if (isLightColor(content_color)) {
	var dropdowncolor = chroma.mix(content_color,'#0e191a',MW18HoverThreshold*0.4, 'hsv');
	if ((getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color") === 'auto') && !($("html.contrast.win10").length)  ) {
		var dropdowncolor2 = chroma.mix(content_color,'#0e191a',MW18HoverThreshold*2.4, 'hsv');
	} else {
		var dropdowncolor2 = 'inherit';
	}

} else {
	var dropdowncolor = chroma.mix(content_color,'#ffffff',MW18HoverThreshold*0.4, 'hsv');
	if ((getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color") === 'auto') && !($("html.contrast.win10").length)  ) {
		var dropdowncolor2 = chroma.mix(content_color,'#ffffff',MW18HoverThreshold*2.4, 'hsv');
	} else {
		var dropdowncolor2 = 'inherit';
	}

}

if (getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color") != 'auto') {
	var content_text2 = ColorTest(content_text);
	var content_text3 = SuperColorTest(content_text); // Scrollbar
	var content_text4 = ColorTest(content_text,true);
	var content_text4I = ColorTest(content_text,true,true);
	var content_text5 = ColorTest(content_text4,false);
	colormixl = ColorTestTwin(content_color,content_text,0.8,'rgb');
	colormix = ColorTestTwin(content_color,content_text,1.6,'rgb');
} else {
	var content_text2 = ColorTest(dropdowncolor3);
	var content_text3 = SuperColorTest(dropdowncolor3); // Scrollbar
	var content_text4 = ColorTest(dropdowncolor3,true);
	var content_text4I = ColorTest(dropdowncolor3,true,true);
	var content_text5 = ColorTest(content_text4,false);
	colormixl = ColorTestTwin(content_color,dropdowncolor3,0.8,'rgb');
	colormix = ColorTestTwin(content_color,dropdowncolor3,1.6,'rgb');
}


document.querySelector('body').style.setProperty("--page-secondary-background-color", dropdowncolor);
document.querySelector('container').style.setProperty("--page-border-background-color", dropdowncolor2);
if (window.MW18darkmode === true) {
	document.querySelector('container').style.setProperty("--page-background-color", content_color);
	document.querySelector('container').style.setProperty("--page-text-background-color", content_text);
} else {
	document.querySelector('container').style.setProperty("--page-background-color", 'inherit');
	document.querySelector('container').style.setProperty("--page-text-background-color", dropdowncolor3);
}

if (isLightColor( getComputedStyle(document.querySelector('container')).getPropertyValue("--page-text-background-color") )) {
document.querySelector('body').style.setProperty("--page-text-gradient-color", getComputedStyle(document.querySelector('container')).getPropertyValue("--page-text-background-color"));
document.querySelector('body').style.setProperty("--page-text-gradient-color-hover", content_text2);
} else {
document.querySelector('body').style.setProperty("--page-text-gradient-color", content_text2);
document.querySelector('body').style.setProperty("--page-text-gradient-color-hover", getComputedStyle(document.querySelector('container')).getPropertyValue("--page-text-background-color"));
}


document.querySelector('body').style.setProperty("--page-background-color-hover", content_color2);
document.querySelector('body').style.setProperty("--page-background-color-active", content_color3); // Scrollbar
document.querySelector('body').style.setProperty("--page-text-background-color-hover", content_text2);
document.querySelector('body').style.setProperty("--page-text-background-color-active", content_text3); // Scrollbar
document.querySelector('body').style.setProperty("--page-text-foreground-color", content_text4);
document.querySelector('body').style.setProperty("--page-text-foreground-color-inverted", content_text4I);
document.querySelector('body').style.setProperty("--page-text-foreground-color-hover", content_text5);
document.querySelector('body').style.setProperty("--page-text-background-color-page-background-color-mix-light", colormixl);
document.querySelector('body').style.setProperty("--page-text-background-color-page-background-color-mix", colormix);

// RGB
document.querySelector('body').style.setProperty("--page-secondary-background-color-rgb", Color2(dropdowncolor));
document.querySelector('body').style.setProperty("--page-background-color-rgb", Color2( getComputedStyle(document.querySelector('container')).getPropertyValue("--page-background-color") ));
document.querySelector('body').style.setProperty("--page-background-color-hover-rgb", Color2(content_color2));
document.querySelector('body').style.setProperty("--page-background-color-active-rgb", Color2(content_color3));
document.querySelector('body').style.setProperty("--page-text-background-color-rgb", Color2( getComputedStyle(document.querySelector('container')).getPropertyValue("--page-text-background-color") ));
document.querySelector('body').style.setProperty("--page-text-background-color-hover-rgb", Color2(content_text2));
document.querySelector('body').style.setProperty("--page-text-background-color-active-rgb", Color2(content_text3));
document.querySelector('body').style.setProperty("--page-text-foreground-color-rgb", Color2(content_text4));
document.querySelector('body').style.setProperty("--page-text-foreground-color-inverted-rgb", Color2(content_text4I));
document.querySelector('body').style.setProperty("--page-text-foreground-color-hover-rgb", Color2(content_text5));
document.querySelector('body').style.setProperty("--page-text-gradient-color-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-gradient-color") ));
document.querySelector('body').style.setProperty("--page-text-gradient-color-hover-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-gradient-color-hover") ));


/** Button Color **/
/* Set Vars */
var button_color = getComputedStyle(document.querySelector('body')).getPropertyValue("--accent-background-color");
var buttoncolor1 = ColorTest(button_color,false);
var buttoncolor2 = ColorTest(button_color,true);
var buttoncolor2I = ColorTest(button_color,true,true);
var buttoncolor2t = ColorTest(buttoncolor2,false);
var buttoncolor3 = SuperColorTest(button_color); // Scrollbar


if (isLightColor(button_color)) {
document.querySelector('body').style.setProperty("--accent-gradient-color", button_color);
document.querySelector('body').style.setProperty("--accent-gradient-color-hover", buttoncolor1);
} else {
document.querySelector('body').style.setProperty("--accent-gradient-color", buttoncolor1);
document.querySelector('body').style.setProperty("--accent-gradient-color-hover", button_color);
}

buttonmixl = ColorTestTwin(content_color,button_color,0.8,'rgb');
buttonmix = ColorTestTwin(content_color,button_color,1.6,'rgb');


/* Set Values */
document.querySelector('body').style.setProperty("--accent-background-color-hover", buttoncolor1);
document.querySelector('body').style.setProperty("--accent-background-color-active", buttoncolor3); // Scrollbar
document.querySelector('body').style.setProperty("--accent-foreground-color", buttoncolor2);
document.querySelector('body').style.setProperty("--accent-foreground-color-inverted", buttoncolor2I);
document.querySelector('body').style.setProperty("--accent-foreground-color-hover", buttoncolor2t);
document.querySelector('body').style.setProperty("--accent-background-color-page-background-color-mix-light", buttonmixl);
document.querySelector('body').style.setProperty("--accent-background-color-page-background-color-mix", buttonmix);
// RGB
document.querySelector('body').style.setProperty("--accent-background-color-rgb", Color2(button_color));
document.querySelector('body').style.setProperty("--accent-background-color-hover-rgb", Color2(buttoncolor1));
document.querySelector('body').style.setProperty("--accent-background-color-active-rgb", Color2(buttoncolor3));
document.querySelector('body').style.setProperty("--accent-foreground-color-rgb", Color2(buttoncolor2));
document.querySelector('body').style.setProperty("--accent-foreground-color-inverted-rgb", Color2(buttoncolor2I));
document.querySelector('body').style.setProperty("--accent-foreground-color-hover-rgb", Color2(buttoncolor2t));
document.querySelector('body').style.setProperty("--accent-gradient-color-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--accent-gradient-color") ));
document.querySelector('body').style.setProperty("--accent-gradient-color-hover-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--accent-gradient-color-hover") ));


/** Header Color **/
/* Set Vars */
var header_color = getComputedStyle(document.querySelector('body')).getPropertyValue("--sticky-header-background-color");
var headercolor1 = ColorTest(header_color,false);
var headercolor2 = ColorTest(header_color,true);
var headercolor2I = ColorTest(header_color,true,true);
var headercolor2t = ColorTest(headercolor2,false);
var headercolor3 = SuperColorTest(header_color); // Scrollbar

if (isLightColor(header_color)) {
document.querySelector('body').style.setProperty("--sticky-header-gradient-color", header_color);
document.querySelector('body').style.setProperty("--sticky-header-gradient-color-hover", headercolor1);
} else {
document.querySelector('body').style.setProperty("--sticky-header-gradient-color", headercolor1);
document.querySelector('body').style.setProperty("--sticky-header-gradient-color-hover", header_color);
}

headermixl = ColorTestTwin(content_color,header_color,0.8,'rgb');
headermix = ColorTestTwin(content_color,header_color,1.6,'rgb');



/* Set Values */
document.querySelector('body').style.setProperty("--sticky-header-background-color-hover", headercolor1);
document.querySelector('body').style.setProperty("--sticky-header-background-color-active", headercolor3); // Scrollbar
document.querySelector('body').style.setProperty("--sticky-header-foreground-color", headercolor2);
document.querySelector('body').style.setProperty("--sticky-header-foreground-color-inverted", headercolor2I);
document.querySelector('body').style.setProperty("--sticky-header-foreground-color-hover", headercolor2t);
document.querySelector('body').style.setProperty("--sticky-header-background-color-page-background-color-mix-light", headermixl);
document.querySelector('body').style.setProperty("--sticky-header-background-color-page-background-color-mix", headermix);
// RGB
document.querySelector('body').style.setProperty("--sticky-header-background-color-rgb", Color2(header_color));
document.querySelector('body').style.setProperty("--sticky-header-background-color-hover-rgb", Color2(headercolor1));
document.querySelector('body').style.setProperty("--sticky-header-background-color-active-rgb", Color2(headercolor3));
document.querySelector('body').style.setProperty("--sticky-header-foreground-color-rgb", Color2(headercolor2));
document.querySelector('body').style.setProperty("--sticky-header-foreground-color-inverted-rgb", Color2(headercolor2I));
document.querySelector('body').style.setProperty("--sticky-header-foreground-color-hover-rgb", Color2(headercolor2t));
document.querySelector('body').style.setProperty("--sticky-header-gradient-color-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--sticky-header-gradient-color") ));
document.querySelector('body').style.setProperty("--sticky-header-gradient-color-hover-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--sticky-header-gradient-color-hover") ));


/** Link Color **/
/* Set Vars */
var link_color = getComputedStyle(document.querySelector('body')).getPropertyValue("--anchor-background-color");
var linkcolor1 = ColorTest(link_color,false);
var linkcolor2 = ColorTest(link_color,true);
var linkcolor2I = ColorTest(link_color,true,true);
var linkcolor2t = ColorTest(linkcolor2,false);
var linkcolor3 = SuperColorTest(link_color); // Scrollbar



if (isLightColor(link_color)) {
document.querySelector('body').style.setProperty("--anchor-gradient-color", link_color);
document.querySelector('body').style.setProperty("--anchor-gradient-color-hover", linkcolor1);
} else {
document.querySelector('body').style.setProperty("--anchor-gradient-color", linkcolor1);
document.querySelector('body').style.setProperty("--anchor-gradient-color-hover", link_color);
}

linkmixl = ColorTestTwin(content_color,link_color,0.8,'rgb');
linkmix = ColorTestTwin(content_color,link_color,1.6,'rgb');


/* Set Values */
document.querySelector('body').style.setProperty("--anchor-background-color-hover", linkcolor1);
document.querySelector('body').style.setProperty("--anchor-background-color-active", linkcolor3); // Scrollbar
document.querySelector('body').style.setProperty("--anchor-foreground-color", linkcolor2);
document.querySelector('body').style.setProperty("--anchor-foreground-color-inverted", linkcolor2I);
document.querySelector('body').style.setProperty("--anchor-foreground-color-hover", linkcolor2t);
document.querySelector('body').style.setProperty("--anchor-background-color-page-background-color-mix-light", linkmixl);
document.querySelector('body').style.setProperty("--anchor-background-color-page-background-color-mix", linkmix);
// RGB
document.querySelector('body').style.setProperty("--anchor-background-color-rgb", Color2(link_color));
document.querySelector('body').style.setProperty("--anchor-background-color-hover-rgb", Color2(linkcolor1));
document.querySelector('body').style.setProperty("--anchor-background-color-active-rgb", Color2(linkcolor3));
document.querySelector('body').style.setProperty("--anchor-foreground-color-rgb", Color2(linkcolor2));
document.querySelector('body').style.setProperty("--anchor-foreground-color-inverted-rgb", Color2(linkcolor2I));
document.querySelector('body').style.setProperty("--anchor-foreground-color-hover-rgb", Color2(linkcolor2t));
document.querySelector('body').style.setProperty("--anchor-gradient-color-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--anchor-gradient-color") ));
document.querySelector('body').style.setProperty("--anchor-gradient-color-hover-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--anchor-gradient-color-hover") ));

/** Content Border **/
/* Set Vars */
if ((getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color") === 'auto') && !($("html.contrast.win10").length)  ) {
	var border_color =	getComputedStyle(document.querySelector('container')).getPropertyValue("--page-border-background-color");
} else {
	var border_color =	getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color");
}

var bordercolor1 = ColorTest(border_color,false);
var bordercolor3 = SuperColorTest(border_color); // Scrollbar
var bordercolor2 = ColorTest(border_color,true);
var bordercolor2I = ColorTest(border_color,true,true);
var bordercolor2t = ColorTest(bordercolor2,false);


if (isLightColor(border_color)) {
document.querySelector('body').style.setProperty("--page-border-gradient-color", border_color);
document.querySelector('body').style.setProperty("--page-border-gradient-color-hover", bordercolor1);
} else {
document.querySelector('body').style.setProperty("--page-border-gradient-color", bordercolor1);
document.querySelector('body').style.setProperty("--page-border-gradient-color-hover", border_color);
}

bordermixl = ColorTestTwin(content_color,border_color,0.8,'rgb');
bordermix = ColorTestTwin(content_color,border_color,1.6,'rgb');

/* Set Values */
document.querySelector('body').style.setProperty("--page-border-background-color-hover", bordercolor1);
document.querySelector('body').style.setProperty("--page-border-background-color-active", bordercolor3); // Scrollbar
document.querySelector('body').style.setProperty("--page-border-foreground-color", bordercolor2);
document.querySelector('body').style.setProperty("--page-border-foreground-color-inverted", bordercolor2I);
document.querySelector('body').style.setProperty("--page-border-foreground-color-hover", bordercolor2t);
document.querySelector('body').style.setProperty("--page-border-background-color-page-background-color-mix-light", bordermixl);
document.querySelector('body').style.setProperty("--page-border-background-color-page-background-color-mix", bordermix);
// RGB
document.querySelector('body').style.setProperty("--page-border-background-color-rgb", Color2(border_color));
document.querySelector('body').style.setProperty("--page-border-background-color-hover-rgb", Color2(bordercolor1));
document.querySelector('body').style.setProperty("--page-border-background-color-active-rgb", Color2(bordercolor3));
document.querySelector('body').style.setProperty("--page-border-foreground-color-rgb", Color2(bordercolor2));
document.querySelector('body').style.setProperty("--page-border-foreground-color-inverted-rgb", Color2(bordercolor2I));
document.querySelector('body').style.setProperty("--page-border-foreground-color-hover-rgb", Color2(bordercolor2t));
document.querySelector('body').style.setProperty("--page-border-gradient-color-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-gradient-color") ));
document.querySelector('body').style.setProperty("--page-border-gradient-color-hover-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-gradient-color-hover") ));


/** Body Bg **/
/* Set Vars */
var head_color =	getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-color");
var headcolor1 = ColorTest(head_color,false);
var headcolor3 = SuperColorTest(head_color); // Scrollbar
var headcolor2 = ColorTest(head_color,true);
var headcolor2I = ColorTest(head_color,true,true);
var headcolor2t = ColorTest(headcolor2,false);

if (isLightColor(head_color)) {
document.querySelector('body').style.setProperty("--community-gradient-color", head_color);
document.querySelector('body').style.setProperty("--community-gradient-color-hover", headcolor1);
} else {
document.querySelector('body').style.setProperty("--community-gradient-color", headcolor1);
document.querySelector('body').style.setProperty("--community-gradient-color-hover", head_color);
}

headmixl = ColorTestTwin(content_color,head_color,0.8,'rgb');
headmix = ColorTestTwin(content_color,head_color,1.6,'rgb');

/* Set Values */
document.querySelector('body').style.setProperty("--community-background-color-hover", headcolor1);
document.querySelector('body').style.setProperty("--community-background-color-active", headcolor3); // Scrollbar
document.querySelector('body').style.setProperty("--community-foreground-color", headcolor2);
document.querySelector('body').style.setProperty("--community-foreground-color-inverted", headcolor2I);
document.querySelector('body').style.setProperty("--community-foreground-color-hover", headcolor2t);
document.querySelector('body').style.setProperty("--community-background-color-page-background-color-mix-light", headmixl);
document.querySelector('body').style.setProperty("--community-background-color-page-background-color-mix", headmix);
// RGB
document.querySelector('body').style.setProperty("--community-background-color-rgb", Color2(head_color));
document.querySelector('body').style.setProperty("--community-background-color-hover-rgb", Color2(headcolor1));
document.querySelector('body').style.setProperty("--community-background-color-active-rgb", Color2(headcolor3));
document.querySelector('body').style.setProperty("--community-foreground-color-rgb", Color2(headcolor2));
document.querySelector('body').style.setProperty("--community-foreground-color-inverted-rgb", Color2(headcolor2I));
document.querySelector('body').style.setProperty("--community-foreground-color-hover-rgb", Color2(headcolor2t));
document.querySelector('body').style.setProperty("--community-gradient-color-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--community-gradient-color") ));
document.querySelector('body').style.setProperty("--community-gradient-color-hover-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--community-gradient-color-hover") ));

/* Floating Header Bg */
if ((getComputedStyle(document.querySelector('body')).getPropertyValue("--toolbar-background-color") !== 'auto') && !($("html.contrast.win10").length)  ) {
	var floating_header =	'inherit' ;
} else {
	var floating_header = ColorTestTwin(content_color,ColorTestTwin(header_color,button_color,1,'rgb'),2.5,'rgb');
}

document.querySelector('container').style.setProperty("--toolbar-background-color", floating_header);
var floating_color =getComputedStyle(document.querySelector('container')).getPropertyValue("--toolbar-background-color");


var floatingcolor1 = ColorTest(floating_color,false);
var floatingcolor3 = SuperColorTest(floating_color); // Scrollbar
var floatingcolor2 = ColorTest(floating_color,true);
var floatingcolor2I = ColorTest(floating_color,true,true);
var floatingcolor2t = ColorTest(floatingcolor2,false);

if (isLightColor(floating_color)) {
document.querySelector('body').style.setProperty("--toolbar-gradient-color", floating_color);
document.querySelector('body').style.setProperty("--toolbar-gradient-color-hover", floatingcolor1);
} else {
document.querySelector('body').style.setProperty("--toolbar-gradient-color", floatingcolor1);
document.querySelector('body').style.setProperty("--toolbar-gradient-color-hover", floating_color);
}

floatmixl = ColorTestTwin(content_color,floating_color,0.8,'rgb');
floatmix = ColorTestTwin(content_color,floating_color,1.6,'rgb');


document.querySelector('body').style.setProperty("--toolbar-background-color-hover", floatingcolor1);
document.querySelector('body').style.setProperty("--toolbar-background-color-active", floatingcolor3); // Scrollbar
document.querySelector('body').style.setProperty("--toolbar-foreground-color", floatingcolor2);
document.querySelector('body').style.setProperty("--toolbar-foreground-color-inverted", floatingcolor2I);
document.querySelector('body').style.setProperty("--toolbar-foreground-color-hover", floatingcolor2t);
document.querySelector('body').style.setProperty("--toolbar-background-color-page-background-color-mix-light", floatmixl);
document.querySelector('body').style.setProperty("--toolbar-background-color-page-background-color-mix", floatmix);

// RGB
document.querySelector('body').style.setProperty("--toolbar-background-color-rgb", Color2( getComputedStyle(document.querySelector('container')).getPropertyValue("--toolbar-background-color") ));
document.querySelector('body').style.setProperty("--toolbar-background-color-hover-rgb", Color2(floatingcolor1));
document.querySelector('body').style.setProperty("--toolbar-background-color-active-rgb", Color2(floatingcolor3));
document.querySelector('body').style.setProperty("--toolbar-foreground-color-rgb", Color2(floatingcolor2));
document.querySelector('body').style.setProperty("--toolbar-foreground-color-inverted-rgb", Color2(floatingcolor2I));
document.querySelector('body').style.setProperty("--toolbar-foreground-color-hover-rgb", Color2(floatingcolor2t));
document.querySelector('body').style.setProperty("--toolbar-gradient-color-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--toolbar-gradient-color") ));
document.querySelector('body').style.setProperty("--toolbar-gradient-color-hover-rgb", Color2( getComputedStyle(document.querySelector('body')).getPropertyValue("--toolbar-gradient-color-hover") ));


/* Info, Success, Warning and Alert color mixes */
// Info
infomixl = ColorTestTwin(content_color,'#575859',0.8,'rgb');
infomix = ColorTestTwin(content_color,'#575859',1.6,'rgb');
document.querySelector('body').style.setProperty("--info-background-color-page-background-color-mix-light", infomixl);
document.querySelector('body').style.setProperty("--info-background-color-page-background-color-mix", infomix);
// Success
successmixl = ColorTestTwin(content_color,'#14866d',0.8,'rgb');
successmix = ColorTestTwin(content_color,'#14866d',1.6,'rgb');
document.querySelector('body').style.setProperty("--success-background-color-page-background-color-mix-light", successmixl);
document.querySelector('body').style.setProperty("--success-background-color-page-background-color-mix", successmix);
// Wanring
warningmixl = ColorTestTwin(content_color,'#ffcc33',0.8,'rgb');
warningmix = ColorTestTwin(content_color,'#ffcc33',1.6,'rgb');
document.querySelector('body').style.setProperty("--warning-background-color-page-background-color-mix-light", warningmixl);
document.querySelector('body').style.setProperty("--warning-background-color-page-background-color-mix", warningmix);
// Alert
alertmixl = ColorTestTwin(content_color,'#dd3333',0.8,'rgb');
alertmix = ColorTestTwin(content_color,'#dd3333',1.6,'rgb');
document.querySelector('body').style.setProperty("--alert-background-color-page-background-color-mix-light", alertmixl);
document.querySelector('body').style.setProperty("--alert-background-color-page-background-color-mix", alertmix);




/* Emphasis Themes */
var emphasiscolor = chroma.mix(content_color, chroma.mix(border_color, link_color, MW18HoverThreshold*2.5), MW18HoverThreshold*2.5);
var emphasiscolor2 = ColorTest(emphasiscolor,true);
var emphasiscolor2I = ColorTest(emphasiscolor,true,true);
var emphasiscolor2t = ColorTest(emphasiscolor2,false);
var accentcolor = chroma.mix(chroma.mix(content_color, border_color, MW18HoverThreshold*2.5), button_color, MW18HoverThreshold*2.5);
var accentcolor2 = ColorTest(accentcolor,true);
var accentcolor2I = ColorTest(accentcolor,true,true);
var accentcolor2t = ColorTest(accentcolor2,false);


document.querySelector('body').style.setProperty("--page-emphasis-background-color", emphasiscolor);
document.querySelector('body').style.setProperty("--page-emphasis-foreground-color", emphasiscolor2);
document.querySelector('body').style.setProperty("--page-emphasis-foreground-color-inverted", emphasiscolor2I);
document.querySelector('body').style.setProperty("--page-emphasis-foreground-color-hover", emphasiscolor2t);
document.querySelector('body').style.setProperty("--page-secondary-emphasis-background-color", accentcolor);
document.querySelector('body').style.setProperty("--page-secondary-emphasis-foreground-color", accentcolor2);
document.querySelector('body').style.setProperty("--page-secondary-emphasis-foreground-color-inverted", accentcolor2I);
document.querySelector('body').style.setProperty("--page-secondary-emphasis-foreground-color-hover", accentcolor2t);
// RGB
document.querySelector('body').style.setProperty("--page-emphasis-background-color-rgb", Color2(emphasiscolor));
document.querySelector('body').style.setProperty("--page-emphasis-foreground-color-rgb", Color2(emphasiscolor2));
document.querySelector('body').style.setProperty("--page-emphasis-foreground-color-inverted-rgb", Color2(emphasiscolor2I));
document.querySelector('body').style.setProperty("--page-emphasis-foreground-color-hover-rgb", Color2(emphasiscolor2t));
document.querySelector('body').style.setProperty("--page-secondary-emphasis-background-color-rgb", Color2(accentcolor));
document.querySelector('body').style.setProperty("--page-secondary-emphasis-foreground-color-rgb", Color2(accentcolor2));
document.querySelector('body').style.setProperty("--page-secondary-emphasis-foreground-color-inverted-rgb", Color2(accentcolor2I));
document.querySelector('body').style.setProperty("--page-secondary-emphasis-foreground-color-hover-rgb", Color2(accentcolor2t));


ThemeColorMetaTag();

/* Cursor Theme */
if (refresh === true) {
	CheckBG()
	CheckAdapt()
//	colortheme($('body').attr("wikitheme"))
}
if (window.MW18darkmode) {
	$('body').attr("dark-mode", isLightColor(content_color) );
} else {
	$('body').attr("dark-mode", !(isLightColor(content_color)) );
}
SocialCompile();
if (window.MW18auto === true) {
CursorT('auto');
}
if (window.MW18autoDark === true) {
CursorT('auto-r');
}


}

function CheckColorSuitability() {
}


function CheckAdapt() {
		if ((getComputedStyle(document.querySelector('body')).getPropertyValue("--toolbar-background-color") === 'auto') && !($("html.contrast.win10").length)  ) {
				$("body").attr('toolbar-background-color-auto', 'true');
		} else {
				$("body").attr('toolbar-background-color-auto', 'false');
		}
		if ((getComputedStyle(document.querySelector('body')).getPropertyValue("--page-border-background-color") === 'auto') && !($("html.contrast.win10").length)  ) {
				$("body").attr('page-border-background-color-auto', 'true');
		} else {
				$("body").attr('page-border-background-color-auto', 'false');
		}
		if ((getComputedStyle(document.querySelector('body')).getPropertyValue("--page-text-background-color") === 'auto') && !($("html.contrast.win10").length)  ) {
				$("body").attr('page-text-background-color-auto', 'true');
		} else {
				$("body").attr('page-text-background-color-auto', 'false');
		}
		if ((getComputedStyle(document.querySelector('body')).getPropertyValue("--caret-color") === 'auto') && !($("html.contrast.win10").length)  ) {
				$("body").attr('caret-color-auto', 'true');
		} else {
				$("body").attr('caret-color-auto', 'false');
		}
//	ColorUpdate(false);
}

/* Different with the ToggleBG function, only one is present for all three */
function CheckBG() {
	$("body").attr('community-background-mode', getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-mode") );
	$("body").attr('community-background-size', getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-size") );
	$("body").attr('community-background-alignment', getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-alignment") );
	$("body").attr('body-no-tiling', getComputedStyle(document.querySelector('body')).getPropertyValue("--community-background-no-tiling") );
}

/* 
** BG  = Backgkround Body Display - community-background-mode attribute is ued
** BG1 = Background Position - No body attribute is used
** BG2 = Background Tiling (Only on Legacy Background Display with Full or Contain sizing) - community-background-no-tiling attribute is used
** BG3 = Background Size (Only on Legacy Background Display) - community-background-size attribute is used
*/

function ToggleBG() {
var modern = document.querySelector('input#BG_1');
var legacy = document.querySelector('input#BG_2');
	if (legacy.checked) {

	if ($("html.theme-A").length) {
		$("style.designer-style.theme-A").append(
		'.theme-A[visualcolors="standard"] {' +
		'--community-background-mode:legacy!important;' +
		'}'
		);	
	}

	if ($("html.theme-B").length) {
		$("style.designer-style.theme-B").append(
		'.theme-B[visualcolors="standard"] {' +
		'--community-background-mode:legacy!important;' +
		'}'
		);	
	}

	if ($("html.theme-C").length) {
		$("style.designer-style.theme-C").append(
		'.theme-C[visualcolors="standard"] {' +
		'--community-background-mode:legacy!important;' +
		'}'
		);	
	}

	if ($("html.theme-D").length) {
		$("style.designer-style.theme-D").append(
		'.theme-D[visualcolors="standard"] {' +
		'--community-background-mode:legacy!important;' +
		'}'
		);	
	}
	} else if (modern.checked) {

	if ($("html.theme-A").length) {
		$("style.designer-style.theme-A").append(
		'.theme-A[visualcolors="standard"] {' +
		'--community-background-mode:modern!important;' +
		'}'
		);	
	}

	if ($("html.theme-B").length) {
		$("style.designer-style.theme-B").append(
		'.theme-B[visualcolors="standard"] {' +
		'--community-background-mode:modern!important;' +
		'}'
		);	
	}

	if ($("html.theme-C").length) {
		$("style.designer-style.theme-C").append(
		'.theme-C[visualcolors="standard"] {' +
		'--community-background-mode:modern!important;' +
		'}'
		);	
	}

	if ($("html.theme-D").length) {
		$("style.designer-style.theme-D").append(
		'.theme-D[visualcolors="standard"] {' +
		'--community-background-mode:modern!important;' +
		'}'
		);	
	}
	}	
	CheckBG();
}

function ToggleBG1() {
var top = document.querySelector('input#BG1_1');
var middle = document.querySelector('input#BG1_2');
var bottom = document.querySelector('input#BG1_3');
let str = "";
if (top.checked) {
	str = "top";
} else if (middle.checked) {
	str = "center";
} else if (bottom.checked) {
	str = "bottom";
}
	if ($("html.theme-A").length) {
		$("style.designer-style.theme-A").append(
		'.theme-A[visualcolors="standard"] {' +
		'--community-background-alignment:' + str + '!important;' +
		'}'
		);	
	}

	if ($("html.theme-B").length) {
		$("style.designer-style.theme-B").append(
		'.theme-B[visualcolors="standard"] {' +
		'--community-background-alignment:' + str + '!important;' +
		'}'
		);	
	}

	if ($("html.theme-C").length) {
		$("style.designer-style.theme-C").append(
		'.theme-C[visualcolors="standard"] {' +
		'--community-background-alignment:' + str + '!important;' +
		'}'
		);	
	}

	if ($("html.theme-D").length) {
		$("style.designer-style.theme-D").append(
		'.theme-D[visualcolors="standard"] {' +
		'--community-background-alignment:' + str + '!important;' +
		'}'
		);	
	}
	CheckBG();
}

function ToggleBG2() {
var x = document.querySelector('input#BG2');
	if (x.checked) {

	if ($("html.theme-A").length) {
		$("style.designer-style.theme-A").append(
		'.theme-A[visualcolors="standard"] {' +
		'--community-background-no-tiling:true!important;' +
		'}'
		);	
	}

	if ($("html.theme-B").length) {
		$("style.designer-style.theme-B").append(
		'.theme-B[visualcolors="standard"] {' +
		'--community-background-no-tiling:true!important;' +
		'}'
		);	
	}

	if ($("html.theme-C").length) {
		$("style.designer-style.theme-C").append(
		'.theme-C[visualcolors="standard"] {' +
		'--community-background-no-tiling:true!important;' +
		'}'
		);	
	}

	if ($("html.theme-D").length) {
		$("style.designer-style.theme-D").append(
		'.theme-D[visualcolors="standard"] {' +
		'--community-background-no-tiling:true!important;' +
		'}'
		);	
	}
	} else {

	if ($("html.theme-A").length) {
		$("style.designer-style.theme-A").append(
		'.theme-A[visualcolors="standard"] {' +
		'--community-background-no-tiling:false!important;' +
		'}'
		);	
	}

	if ($("html.theme-B").length) {
		$("style.designer-style.theme-B").append(
		'.theme-B[visualcolors="standard"] {' +
		'--community-background-no-tiling:false!important;' +
		'}'
		);	
	}

	if ($("html.theme-C").length) {
		$("style.designer-style.theme-C").append(
		'.theme-C[visualcolors="standard"] {' +
		'--community-background-no-tiling:false!important;' +
		'}'
		);	
	}

	if ($("html.theme-D").length) {
		$("style.designer-style.theme-D").append(
		'.theme-D[visualcolors="standard"] {' +
		'--community-background-no-tiling:false!important;' +
		'}'
		);	
	}
	}	
	CheckBG();
}



function ToggleBG3() {
var cover= document.querySelector('input#BG3_1');
var contain = document.querySelector('input#BG3_2');
var stretched = document.querySelector('input#BG3_3');
var full = document.querySelector('input#BG3_4');
let str = "";
if (cover.checked) {
	str = "cover";
} else if (contain.checked) {
	str = "contain";
} else if (stretched.checked) {
	str = "stretched";
} else if (full.checked) {
	str = "full";
}
	if ($("html.theme-A").length) {
		$("style.designer-style.theme-A").append(
		'.theme-A[visualcolors="standard"] {' +
		'--community-background-size:' + str + '!important;' +
		'}'
		);	
	}

	if ($("html.theme-B").length) {
		$("style.designer-style.theme-B").append(
		'.theme-B[visualcolors="standard"] {' +
		'--community-background-size:' + str + '!important;' +
		'}'
		);	
	}

	if ($("html.theme-C").length) {
		$("style.designer-style.theme-C").append(
		'.theme-C[visualcolors="standard"] {' +
		'--community-background-size:' + str + '!important;' +
		'}'
		);	
	}

	if ($("html.theme-D").length) {
		$("style.designer-style.theme-D").append(
		'.theme-D[visualcolors="standard"] {' +
		'--community-background-size:' + str + '!important;' +
		'}'
		);	
	}
	CheckBG();
}


/* Toggles Theme */
function HCa() {
    var x = document.querySelector('html');
    if (x.className.indexOf("theme-A") == -1) {
        x.className += " theme-A";
    }
        x.className = x.className.replace(" theme-B", "");
        x.className = x.className.replace(" theme-C", "");
        x.className = x.className.replace(" theme-D", "");
		ColorUpdate(true);
		UpdateMisc();
		insertKey('theme-active', 'theme-A' );
		$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-themes li").removeClass('selected');
		$(".cpe-dropdown .cpe-dropdown__content .cpe-themes li[data-theme-change='" + getKey('theme-active') + "']").addClass('selected');
}

function HCb() {
    var x = document.querySelector('html');
    if (x.className.indexOf("theme-B") == -1) {
        x.className += " theme-B";
		}
        x.className = x.className.replace(" theme-A", "");
        x.className = x.className.replace(" theme-C", "");
        x.className = x.className.replace(" theme-D", "");
		ColorUpdate(true);
		UpdateMisc();
		insertKey('theme-active', 'theme-B' );
		$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-themes li").removeClass('selected');
		$(".cpe-dropdown .cpe-dropdown__content .cpe-themes li[data-theme-change='" + getKey('theme-active') + "']").addClass('selected');
}

function HCc() {
    var x = document.querySelector('html');
    if (x.className.indexOf("theme-C") == -1) {
        x.className += " theme-C";
    }
        x.className = x.className.replace(" theme-A", "");
        x.className = x.className.replace(" theme-B", "");
        x.className = x.className.replace(" theme-D", "");
		ColorUpdate(true);
		UpdateMisc();
		insertKey('theme-active', 'theme-C' );
		$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-themes li").removeClass('selected');
		$(".cpe-dropdown .cpe-dropdown__content .cpe-themes li[data-theme-change='" + getKey('theme-active') + "']").addClass('selected');
}

function HCd() {
    var x = document.querySelector('html');
    if (x.className.indexOf("theme-D") == -1) {
        x.className += " theme-D";
    }
        x.className = x.className.replace(" theme-A", "");
        x.className = x.className.replace(" theme-B", "");
        x.className = x.className.replace(" theme-C", "");
		ColorUpdate(true);
		UpdateMisc();
		insertKey('theme-active', 'theme-D' );
		$(".cpe-dropdown .cpe-dropdown__content .cpe-list.cpe-themes li").removeClass('selected');
		$(".cpe-dropdown .cpe-dropdown__content .cpe-themes li[data-theme-change='" + getKey('theme-active') + "']").addClass('selected');
}

function UpdateFont() {
var x = $('input.font_2nd').val();
	if (x=="") {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--custom-secondary-font:""!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--custom-secondary-font:""!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--custom-secondary-font:""!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--custom-secondary-font:""!important;' +
			'}'
			);	
		}
		
	} else {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--custom-secondary-font:' + x + '!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--custom-secondary-font:' + x + '!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--custom-secondary-font:' + x + '!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--custom-secondary-font:' + x + '!important;' +
			'}'
			);	
		}
	}
}

function UpdateButtonRadi() {
var x = $('input.button_radi').val();
	if (x=="0") {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--border-radius:0!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--border-radius:0!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--border-radius:0!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--border-radius:0!important;' +
			'}'
			);	
		}
		
	} else {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--border-radius:' + x + 'px!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--border-radius:' + x + 'px!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--border-radius:' + x + 'px!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--border-radius:' + x + 'px!important;' +
			'}'
			);	
		}
	}
}

function UpdateFilter1() {
var x = $('input.filter1').val();
	if (x=="") {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--logo-filter:initial!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--logo-filter:initial!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--logo-filter:initial!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--logo-filter:initial!important;' +
			'}'
			);	
		}
		
	} else {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--logo-filter:' + x + '!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--logo-filter:' + x + '!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--logo-filter:' + x + '!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--logo-filter:' + x + '!important;' +
			'}'
			);	
		}
	}
}

function UpdateFilter2() {
var x = $('input.filter2').val();
	if (x=="") {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--logo-filter-hover:initial!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--logo-filter-hover:initial!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--logo-filter-hover:initial!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--logo-filter-hover:initial!important;' +
			'}'
			);	
		}
		
	} else {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--logo-filter-hover:' + x + '!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--logo-filter-hover:' + x + '!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--logo-filter-hover:' + x + '!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--logo-filter-hover:' + x + '!important;' +
			'}'
			);	
		}
	}
}

function UpdateFilter3() {
var x = $('input.filter_duration').val();
	if (x=="0") {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--logo-filter-duration:0!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--logo-filter-duration:0!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--logo-filter-duration:0!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--logo-filter-duration:0!important;' +
			'}'
			);	
		}
		
	} else {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--logo-filter-duration:' + x +'ms!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--logo-filter-duration:' + x +'ms!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--logo-filter-duration:' + x +'ms!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--logo-filter-duration:' + x +'ms!important;' +
			'}'
			);	
		}
	}
}

function UpdateFilter4() {
var x = $('input.filter_delay').val();
	if (x=="0") {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--logo-filter-delay:0!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--logo-filter-delay:0!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--logo-filter-delay:0!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--logo-filter-delay:0!important;' +
			'}'
			);	
		}
		
	} else {
		if ($("html.theme-A").length) {
			$("style.designer-style.theme-A").append(
			'.theme-A[visualcolors="standard"] {' +
			'--logo-filter-delay:' + x +'ms!important;' +
			'}'
			);	
		}

		if ($("html.theme-B").length) {
			$("style.designer-style.theme-B").append(
			'.theme-B[visualcolors="standard"] {' +
			'--logo-filter-delay:' + x +'ms!important;' +
			'}'
			);	
		}

		if ($("html.theme-C").length) {
			$("style.designer-style.theme-C").append(
			'.theme-C[visualcolors="standard"] {' +
			'--logo-filter-delay:' + x +'ms!important;' +
			'}'
			);	
		}

		if ($("html.theme-D").length) {
			$("style.designer-style.theme-D").append(
			'.theme-D[visualcolors="standard"] {' +
			'--logo-filter-delay:' + x +'ms!important;' +
			'}'
			);	
		}
	}
}

function UpdateColorThreshold() {
	var x = $('input.color_threshold').val();
	window.MW18LightThreshold = x;
	ColorUpdate(true);
}

function UpdateHoverRation() {
	var x = $('input.hover_ration').val();
	window.MW18HoverThreshold = x * 0.005;
	ColorUpdate(true);
}